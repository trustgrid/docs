<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.110.0"><link rel=canonical type=text/html href=https://docs.trustgrid.io/docs/nodes/tunnels/><link rel=alternate type=application/rss+xml href=https://docs.trustgrid.io/docs/nodes/tunnels/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Tunnels |</title><meta name=description content="Trustgrid Network Device and API documentation"><meta property="og:title" content="Tunnels"><meta property="og:description" content="Trustgrid Network Device and API documentation"><meta property="og:type" content="website"><meta property="og:url" content="https://docs.trustgrid.io/docs/nodes/tunnels/"><meta itemprop=name content="Tunnels"><meta itemprop=description content="Trustgrid Network Device and API documentation"><meta name=twitter:card content="summary"><meta name=twitter:title content="Tunnels"><meta name=twitter:description content="Trustgrid Network Device and API documentation"><link rel=preload href=/scss/main.min.6911289b253d329975de94bccbb593efad1070b6c5994295bc8c67bcf661e005.css as=style><link href=/scss/main.min.6911289b253d329975de94bccbb593efad1070b6c5994295bc8c67bcf661e005.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script>
<link rel=stylesheet href=/css/prism.css><script async src="https://www.googletagmanager.com/gtag/js?id=UA-99793053-3"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-99793053-3")}</script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 469 106"><defs><style>.cls-1{fill:#6b6b6b}.cls-2{fill:#226ce0}</style></defs><title>Trustgrid-Logo-Grey</title><path class="cls-1" d="M.35 28.58H29.26V-.33H.35zM7.13 6.45H22.47V21.8H7.13z"/><path class="cls-1" d="M67.82-.33H38.9V28.58H67.82zM61 21.8H45.68V6.45H61z"/><path class="cls-1" d="M.35 67.13H29.26V38.22H.35zM7.13 45H22.47V60.35H7.13z"/><path class="cls-1" d="M106.36 38.22H77.45v12.3H67.82V41.27L85.26 23.83l-3.06-3L64.76 38.22H38.9V67.13H67.82V54.83h9.63v12.3h12.3V80.39h4.31V67.13h12.3zM61 60.35H45.68V45H61zm38.55.0H84.23V45H99.58z"/><path class="cls-1" d="M.35 105.69H29.26V76.77H.35zM7.13 83.55H22.47V98.9H7.13z"/><path class="cls-1" d="M38.9 105.69H67.82V76.77H38.9zm6.78-22.14H61V98.9H45.68z"/><path class="cls-2" d="M153.94 77.54a18.64 18.64.0 01-10.1 3.17 11.44 11.44.0 01-8.3-3c-2.12-2-3.18-5.12-3.18-9.24V44.56h-6.11V38.78h6.11V27.22H140V38.78h13.2v5.78H140V67q0 3.59 1.31 5.13a4.8 4.8.0 003.91 1.55 13.59 13.59.0 006.67-2z"/><path class="cls-2" d="M176.74 39.56A18 18 0 01186 37.07V44.4q-6.58-.24-10.66 3.42a14.51 14.51.0 00-4.64 9.85V80.39h-7.57V37.32h7.57V46.6a15.52 15.52.0 016-7"/><path class="cls-2" d="M232.34 37.32V80.39h-7.65V71.27q-4.23 9.2-16 9.36-7.48.0-11.72-4.44t-4.24-12.25V37.32h7.66V61.9q0 5.46 3 8.51a10.87 10.87.0 008.18 3.06 12.11 12.11.0 009.57-4.28 16 16 0 003.54-10.7V37.32z"/><path class="cls-2" d="M260.47 44.24a21.21 21.21.0 00-6.15-1 10.48 10.48.0 00-5.49 1.26 4.21 4.21.0 00-2.08 3.87 4.3 4.3.0 002.32 4 34.68 34.68.0 007 2.73 54.86 54.86.0 017.33 2.6 13 13 0 014.85 3.83 10.51 10.51.0 012 6.67 10.58 10.58.0 01-4.6 9.29 19.65 19.65.0 01-11.44 3.17 28.35 28.35.0 01-9.32-1.55 21.07 21.07.0 01-7.61-4.39l2.85-5.54a20.07 20.07.0 006.63 3.91 22 22 0 007.69 1.47 11.45 11.45.0 006-1.39 4.61 4.61.0 002.28-4.23 4.82 4.82.0 00-2.4-4.4 32.85 32.85.0 00-7.29-2.93 48.4 48.4.0 01-7-2.48 12.43 12.43.0 01-4.64-3.71A10 10 0 01239.5 49q0-6 4.4-9a19.07 19.07.0 0111-3 27.13 27.13.0 017.69 1.1 23 23 0 016.56 3l-2.77 5.78a26 26 0 00-5.9-2.6"/><path class="cls-2" d="M303.42 77.54a18.64 18.64.0 01-10.1 3.17 11.44 11.44.0 01-8.3-3c-2.12-2-3.18-5.12-3.18-9.24V44.56h-6.11V38.78h6.11V27.22h7.65V38.78h13.19v5.78H289.49V67c0 2.39.44 4.1 1.3 5.13a4.81 4.81.0 003.91 1.55 13.62 13.62.0 006.68-2z"/><path class="cls-1" d="M352.92 36.34V76.48a19.18 19.18.0 01-3 10.71 19.61 19.61.0 01-8.43 7.08A29.79 29.79.0 01329 96.75a36.74 36.74.0 01-10.66-1.54 34 34 0 01-9-4.16l5.05-10a25.68 25.68.0 006.51 3.17 22.5 22.5.0 007.08 1.14 12.11 12.11.0 007.74-2.27 7.52 7.52.0 002.85-6.2V72.16Q334.12 77.95 326 78a17.69 17.69.0 01-16.41-10.14 24.71 24.71.0 01-2.4-11.12 24.42 24.42.0 012.32-10.91A17.35 17.35.0 01316 38.46a17.92 17.92.0 019.61-2.61A17.42 17.42.0 01333 37.36a14.36 14.36.0 015.5 4.35V36.34zM336.07 64.51a11 11 0 002.44-7.41 11.16 11.16.0 00-2.44-7.49 8.69 8.69.0 00-12.91.0 11 11 0 00-2.48 7.45 10.85 10.85.0 002.48 7.41 8.18 8.18.0 006.47 2.85 8.08 8.08.0 006.44-2.85"/><path class="cls-1" d="M383.9 37.8a16.63 16.63.0 018.26-2V49c-.49.0-1.22-.08-2.2-.08a13.4 13.4.0 00-8.3 2.4A9.18 9.18.0 00378 57.92V80.39H363.5v-44H378v7.33a16 16 0 015.9-5.87"/><path class="cls-1" d="M411.09 18.22a7.55 7.55.0 012.16 5.58 7.59 7.59.0 01-2.16 5.54 8 8 0 01-11 0 7.59 7.59.0 01-2.16-5.54 7.55 7.55.0 012.16-5.58 8.1 8.1.0 0111 0M398.51 36.34h14.41V80.39H398.51z"/><path class="cls-1" d="M468.45 20V80.39H454v-5.7a14.92 14.92.0 01-5.58 4.68A16.94 16.94.0 01440.93 81a20.15 20.15.0 01-10.75-2.85 19.16 19.16.0 01-7.2-8 26.51 26.51.0 01-2.57-11.93 25.77 25.77.0 012.53-11.72A18.6 18.6.0 01430 38.62a20.05 20.05.0 0110.59-2.77 17.24 17.24.0 017.61 1.63A16.19 16.19.0 01454 42.12V20zm-17.1 46.5A11.77 11.77.0 00454 58.57a11.76 11.76.0 00-2.61-8 8.58 8.58.0 00-6.84-3 8.67 8.67.0 00-6.88 3.05A11.69 11.69.0 00435 58.57a11.68 11.68.0 002.64 7.93 8.68 8.68.0 006.88 3.06 8.53 8.53.0 006.84-3.06"/><path class="cls-2" d="M99.58 21.8H84.23V6.46H99.58zM106.36-.33H77.45V28.59h28.91z"/><path class="cls-2" d="M99.58 98.9H84.23V83.55H99.58zm6.78-22.13H77.45v28.92h28.91z"/></svg></span><span class=navbar-brand__name></span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/getting-started/><span>Getting Started</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/docs/><span class=active>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/tutorials/><span>Guides</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/help-center/><span>Help Center</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/release-notes/><span>Release Notes</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.5fd82f6ecb17c63a1186269c2ad48744.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/docs/nodes/tunnels/>Return to the regular view of this page</a>.</p></div><h1 class=title>Tunnels</h1><ul><li>1: <a href=#pg-b11c1ac5de2d23047eeaef34bbcc36e8>GRE</a></li><li>2: <a href=#pg-fc27731e4eecf141cc42060191de9c42>IPSec</a></li><li>3: <a href=#pg-abc39047a89af94602ada4991017aa16>VNET</a></li><li>4: <a href=#pg-190881abc353f27a6db97e6bf2dab78b>WireGuard</a></li></ul><div class=content><h3 id=tunnels-overview>Tunnels Overview</h3><p>Trustgrid Supports configuring various tunneling protocols in order to establish secure connectivity between any appliance that supports the underlying protocol.
The supported tunnels are listed below.</p><ul><li>IPsec - Internet Protocol Security supporting ikev1 and ikev2 tunnels</li><li>GRE - Generic Routing Encapsulation used for setting up a direct point to point network connection</li><li>Vnet - The virtual network tunnel is the Trustgrid Proprietary VPN tunneling protocol and therefore can only be used to establish connectivity to other Trustgrid nodes in the organization</li><li>Wireguard - The latest open source tunneling protocol aiming to provide better performance than the traditional ipsec or openvpn protocols</li></ul><p>&ldquo;Wireguard&rdquo; is a registered trademark of Jason A. Donenfeld</p></div></div><div class=td-content style=page-break-before:always><h1 id=pg-b11c1ac5de2d23047eeaef34bbcc36e8>1 - GRE</h1><div class="pageinfo pageinfo-primary"><p>Trustgrid supports configuring GRE tunnels that can be used to establish connectivity to any appliance that supports the GRE protocol.
A GRE tunnel interface is created which can then be attached to an interface on a node. VRFs can then be used to control the flow of traffic and how it should appear on the network.</p></div><h2 id=configure-gre-tunnel>Configure GRE Tunnel</h2><p>On a Trustgrid Node navigate to Tunnels under the Network Menu and select Add Tunnel and then select GRE</p><p><img src=add_tunnel.png alt=img></p><p><img src=add_gre.png alt=img></p><p><img src=gre.png alt=img></p><h3 id=gre-tunnel-configuration-parameters>GRE Tunnel Configuration Parameters</h3><ul><li>Name - the name of the GRE tunnel interface that will be created on the Trustgrid node</li><li>Description - optional field to used to document the purpose of the tunnel</li><li>IP - the ip address the tunnel is created with in CIDR</li><li>Peer - the remote IP address of the appliance the tunnel is being established with</li><li>VRF - existing VRF on the node the tunnel is being associated to</li><li>MTU - the MTU of the tunnel interface. Typically can be set to 1476.</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-fc27731e4eecf141cc42060191de9c42>2 - IPSec</h1><div class="pageinfo pageinfo-primary"><p>Trustgrid supports configuring traditional IPSec tunnels that can be used to establish connectivity to any appliance that supports the IPSec protocol.
Once an IPSec tunnel is configured an IPSec virtual interface is created that can be attached to a node interface. VRFs can be used in conjunction to explicitly control what traffic is allowed (VRF ACLs) to pass and how it should look on the network (VRF NATs or Traffic Rules).</p></div><h2 id=configure-ipsec-tunnel>Configure IPSec Tunnel</h2><p>On a Trustgrid Node navigate to Tunnels under the Network Menu and select Add Tunnel and then select IPSEC</p><p><img src=add_tunnel.png alt=img></p><p><img src=add_ipsec.png alt=img></p><p><img src=ipsec_config.png alt=img></p><h3 id=ipsec-tunnel-configuration-parameters>IPsec Tunnel Configuration Parameters</h3><h4 id=required-parameters>Required Parameters</h4><ul><li>Name - the name of the IPSec tunnel interface that will be created on the node and displayed in the Trustgrid Portal</li><li>Description - used to document the purpose of the tunnel</li><li>Interface - the network interface the tunnel will be listening on. Typically this will be network adapter 1 which is the WAN interface</li><li>Interface IP - the ip address the tunnel will be created to use in CIDR. Typically this would be a /30.</li><li>Interface VRF - the VRF the tunnel will be associated with in order to apply ACLs / NATs / Routes or Traffic Rules</li><li>Interface MTU - the specified MTU of the tunnel interface. Typically this can be left to the default of 1436</li><li>IKE Version - select version 1 or version 2</li><li>Peer IP - The remote ip address of the appliance the tunnel is being established with</li><li>IKE Cipher - The cipher used for phase 1</li><li>IKE DH Group - The Diffie-Hellman Group used for phase 1</li><li>IPSEC Cipher - the cipher used for phase 2</li><li>PFS - The Diffie-Hellman Group used for phase 2 perfect forward secrecy</li><li>DPD Interval - seconds for dead peer detection</li><li>DPD Retries - number of dead peer detection retries before the tunnel is re-keyed / torn down</li><li>Rekey Interval - time in seconds before a re-key of the tunnel is initiated</li><li>Replay Window - size of the replay window which is used to prevent replay attacks. Typically set between 64 and 128</li><li>Local Subnet - the local subnet in CIDR that will be considered interesting traffic and be allowed to forward over the tunnel</li><li>Remote Subnet - the remote subnet in CIDR will be considered interesting traffic and be received on the tunnel</li><li>Auto Add - the connection is added and then waits for the remote peer to initiate the tunnel establishment</li><li>Auto Start - the connection is added and then attempts to initiate the tunnel to the remote peer</li><li>PSK - the pre-shared key used by both peers to establish the tunnel</li></ul><h4 id=optional-parameters>Optional Parameters</h4><ul><li>Virtual Network - associate the tunnel to a Trustgrid Virtual Network</li><li>IKE Local ID - The IP address that will be seen by the remote peer to establish the tunnel. Typically this would be the public facing WAN IP of the Trustgrid Node.</li><li>IKE Remote ID - Used for identity validation. Typically this is the same address as the Peer IP</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-abc39047a89af94602ada4991017aa16>3 - VNET</h1><div class="pageinfo pageinfo-primary"><p>A virtual network tunnel interface can be configured on a Trustgrid node or cluster to allow forwarding of traffic to a remote Trustgrid Node or Cluster that is attached to the same virtual network. The tunnel interface is associated to a vrf which is used to define and control what traffic is allowed to pass and how it should appear on the network. There is no attachment of the vnet interface to a node interface required but the virtual network does need to be attached to the node or cluster before the tunnel interface is created.</p></div><h2 id=configure-vnet-tunnel>Configure Vnet Tunnel</h2><p>On a Trustgrid Node navigate to Tunnels under the Network Menu and select Add Tunnel and then select VNET</p><p><img src=add_tunnel.png alt=img></p><p><img src=add_vnet.png alt=img></p><p><img src=vnet.png alt=img></p><h4 id=configuration-parameters>Configuration Parameters</h4><ul><li>Name - the name of the tunnel interface created on the Trustgrid Node or Cluster</li><li>Description - optional descriptive parameters related to the tunnel</li><li>Virtual Network - the Trustgrid virtual network the tunnel is being associated to. The virtual network should already be attached to the node or cluster to be selectable.</li><li>VRF - The vrf the tunnel is being associated to. Only vrf&rsquo;s which exist on the Trustgrid Node or Cluster can be selected</li><li>MTU - the mtu size of the tunnel interface. Typically the default of 1430 should be used</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-190881abc353f27a6db97e6bf2dab78b>4 - WireGuard</h1><div class="pageinfo pageinfo-primary"><p>A WireGuard tunnel interface can be configured to allow a WireGuard client to connect to a Trustgrid Node running as a WireGuard server.
The tunnel interface is associated to a vrf which is used to define and control what traffic is allowed to pass and how it should appear on the network.</p></div><h2 id=configure-wireguard-tunnel>Configure WireGuard Tunnel</h2><p>On a Trustgrid Node navigate to Tunnels under the Network Menu and select Add Tunnel and then select WireGuard</p><p><img src=add_tunnel.png alt=img></p><p><img src=add_WireGuard.png alt=img></p><p><img src=WireGuard.png alt=img></p><h3 id=wireguard-configuration-parameters>WireGuard Configuration Parameters</h3><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr id=name><th>Name</th><td>The name of the WireGuard tunnel interface created on the Trustgrid node or cluster.</td></tr><tr id=description><th>Description</th><td>Optional field used to document what clients are utilizing the tunnel.</td></tr><tr id=interface-ip><th>Interface IP</th><td>The IP address in CIDR notation that will be assigned to the node&rsquo;s WireGuard tunnel interface.</td></tr><tr id=public-key><th>Public Key</th><td>The public key of the remote WireGuard client.</td></tr><tr id=pre-shared-key><th>Pre-shared Key</th><td>Optional 256 bit to provide an additonal level of security.</td></tr><tr id=vrf><th>VRF</th><td>The Virtual Routing and Fowarding (VRF) table the WireGuard tunnel will be attached to</td></tr><tr id=mtu><th>MTU</th><td>The maximum transmission unit (MTU) of the WireGuard tunnel interface. Defaults of 1430 or lower recommended.</td></tr></tbody></table><h2 id=example-client-config>Example Client Config</h2><p>As you configure a WireGuard tunnel interface the portal UI will automatically generate an example WireGuard configuration for the peer/client based on the information provided.</p><figure class=centered-image><img src=WireGuard-tunnel-example-config.png alt style=display:block;margin-left:auto;margin-right:auto;width:90%><figcaption style=text-align:center;margin-top:.5rem;font-weight:lighter>Example WireGuard client config</figcaption></figure><div class="alert alert-info" role=alert>Note: this is only a partial config. You will likely need to adjust to the <code>AllowedIps</code> and other fields to meet the needs of the configured tunnel.</div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=LinkedIn aria-label=LinkedIn><a class=text-white target=_blank rel=noopener href=https://www.linkedin.com/company/trustgrid/ aria-label=LinkedIn><i class="fab fa-linkedin"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/trustgrid aria-label=GitHub><i class="fab fa-github"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2023 Trustgrid All Rights Reserved</small>
<small class=ml-1><a href=https://trustgrid.io target=_blank rel=noopener>Privacy Policy</a></small></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/mermaid@9.2.2/dist/mermaid.min.js integrity="sha512-IX+bU+wShHqfqaMHLMrtwi4nK6W/Z+QdZoL4kPNtRxI2wCLyHPMAdl3a43Fv1Foqv4AP+aiW6hg1dcrTt3xc+Q==" crossorigin=anonymous></script>
<script src=/js/main.min.eb0d5914014c9e8699b3e0109eff69ebdcde4f5e0c80993229a0ebfa76596d0b.js integrity="sha256-6w1ZFAFMnoaZs+AQnv9p69zeT14MgJkyKaDr+nZZbQs=" crossorigin=anonymous></script>
<script src=/js/prism.js></script>
<script src=/js/tabpane-persist.js></script></body></html>