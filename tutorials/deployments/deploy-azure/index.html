<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.110.0"><link rel=alternate type=application/rss+xml href=https://docs.trustgrid.io/tutorials/deployments/deploy-azure/index.xml><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Deploy to Azure |</title><meta name=description content="Trustgrid Network Device and API documentation"><meta property="og:title" content="Deploy to Azure"><meta property="og:description" content="Trustgrid Network Device and API documentation"><meta property="og:type" content="website"><meta property="og:url" content="https://docs.trustgrid.io/tutorials/deployments/deploy-azure/"><meta itemprop=name content="Deploy to Azure"><meta itemprop=description content="Trustgrid Network Device and API documentation"><meta name=twitter:card content="summary"><meta name=twitter:title content="Deploy to Azure"><meta name=twitter:description content="Trustgrid Network Device and API documentation"><link rel=preload href=/scss/main.min.d19981a6541647e875ee89bdb266d4d1cf3b52fda916b018fd97c7792e963f4a.css as=style><link href=/scss/main.min.d19981a6541647e875ee89bdb266d4d1cf3b52fda916b018fd97c7792e963f4a.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.3.min.js integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ==" crossorigin=anonymous></script>
<script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script>
<link rel=stylesheet href=/css/prism.css><script async src="https://www.googletagmanager.com/gtag/js?id=UA-99793053-3"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-99793053-3")}</script></head><body class=td-section><header><nav class="td-navbar navbar-dark js-navbar-scroll"><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 469 106"><defs><style>.cls-1{fill:#6b6b6b}.cls-2{fill:#226ce0}</style></defs><title>Trustgrid-Logo-Grey</title><path class="cls-1" d="M.35 28.58H29.26V-.33H.35zM7.13 6.45H22.47V21.8H7.13z"/><path class="cls-1" d="M67.82-.33H38.9V28.58H67.82zM61 21.8H45.68V6.45H61z"/><path class="cls-1" d="M.35 67.13H29.26V38.22H.35zM7.13 45H22.47V60.35H7.13z"/><path class="cls-1" d="M106.36 38.22H77.45v12.3H67.82V41.27L85.26 23.83l-3.06-3L64.76 38.22H38.9V67.13H67.82V54.83h9.63v12.3h12.3V80.39h4.31V67.13h12.3zM61 60.35H45.68V45H61zm38.55.0H84.23V45H99.58z"/><path class="cls-1" d="M.35 105.69H29.26V76.77H.35zM7.13 83.55H22.47V98.9H7.13z"/><path class="cls-1" d="M38.9 105.69H67.82V76.77H38.9zm6.78-22.14H61V98.9H45.68z"/><path class="cls-2" d="M153.94 77.54a18.64 18.64.0 01-10.1 3.17 11.44 11.44.0 01-8.3-3c-2.12-2-3.18-5.12-3.18-9.24V44.56h-6.11V38.78h6.11V27.22H140V38.78h13.2v5.78H140V67q0 3.59 1.31 5.13a4.8 4.8.0 003.91 1.55 13.59 13.59.0 006.67-2z"/><path class="cls-2" d="M176.74 39.56A18 18 0 01186 37.07V44.4q-6.58-.24-10.66 3.42a14.51 14.51.0 00-4.64 9.85V80.39h-7.57V37.32h7.57V46.6a15.52 15.52.0 016-7"/><path class="cls-2" d="M232.34 37.32V80.39h-7.65V71.27q-4.23 9.2-16 9.36-7.48.0-11.72-4.44t-4.24-12.25V37.32h7.66V61.9q0 5.46 3 8.51a10.87 10.87.0 008.18 3.06 12.11 12.11.0 009.57-4.28 16 16 0 003.54-10.7V37.32z"/><path class="cls-2" d="M260.47 44.24a21.21 21.21.0 00-6.15-1 10.48 10.48.0 00-5.49 1.26 4.21 4.21.0 00-2.08 3.87 4.3 4.3.0 002.32 4 34.68 34.68.0 007 2.73 54.86 54.86.0 017.33 2.6 13 13 0 014.85 3.83 10.51 10.51.0 012 6.67 10.58 10.58.0 01-4.6 9.29 19.65 19.65.0 01-11.44 3.17 28.35 28.35.0 01-9.32-1.55 21.07 21.07.0 01-7.61-4.39l2.85-5.54a20.07 20.07.0 006.63 3.91 22 22 0 007.69 1.47 11.45 11.45.0 006-1.39 4.61 4.61.0 002.28-4.23 4.82 4.82.0 00-2.4-4.4 32.85 32.85.0 00-7.29-2.93 48.4 48.4.0 01-7-2.48 12.43 12.43.0 01-4.64-3.71A10 10 0 01239.5 49q0-6 4.4-9a19.07 19.07.0 0111-3 27.13 27.13.0 017.69 1.1 23 23 0 016.56 3l-2.77 5.78a26 26 0 00-5.9-2.6"/><path class="cls-2" d="M303.42 77.54a18.64 18.64.0 01-10.1 3.17 11.44 11.44.0 01-8.3-3c-2.12-2-3.18-5.12-3.18-9.24V44.56h-6.11V38.78h6.11V27.22h7.65V38.78h13.19v5.78H289.49V67c0 2.39.44 4.1 1.3 5.13a4.81 4.81.0 003.91 1.55 13.62 13.62.0 006.68-2z"/><path class="cls-1" d="M352.92 36.34V76.48a19.18 19.18.0 01-3 10.71 19.61 19.61.0 01-8.43 7.08A29.79 29.79.0 01329 96.75a36.74 36.74.0 01-10.66-1.54 34 34 0 01-9-4.16l5.05-10a25.68 25.68.0 006.51 3.17 22.5 22.5.0 007.08 1.14 12.11 12.11.0 007.74-2.27 7.52 7.52.0 002.85-6.2V72.16Q334.12 77.95 326 78a17.69 17.69.0 01-16.41-10.14 24.71 24.71.0 01-2.4-11.12 24.42 24.42.0 012.32-10.91A17.35 17.35.0 01316 38.46a17.92 17.92.0 019.61-2.61A17.42 17.42.0 01333 37.36a14.36 14.36.0 015.5 4.35V36.34zM336.07 64.51a11 11 0 002.44-7.41 11.16 11.16.0 00-2.44-7.49 8.69 8.69.0 00-12.91.0 11 11 0 00-2.48 7.45 10.85 10.85.0 002.48 7.41 8.18 8.18.0 006.47 2.85 8.08 8.08.0 006.44-2.85"/><path class="cls-1" d="M383.9 37.8a16.63 16.63.0 018.26-2V49c-.49.0-1.22-.08-2.2-.08a13.4 13.4.0 00-8.3 2.4A9.18 9.18.0 00378 57.92V80.39H363.5v-44H378v7.33a16 16 0 015.9-5.87"/><path class="cls-1" d="M411.09 18.22a7.55 7.55.0 012.16 5.58 7.59 7.59.0 01-2.16 5.54 8 8 0 01-11 0 7.59 7.59.0 01-2.16-5.54 7.55 7.55.0 012.16-5.58 8.1 8.1.0 0111 0M398.51 36.34h14.41V80.39H398.51z"/><path class="cls-1" d="M468.45 20V80.39H454v-5.7a14.92 14.92.0 01-5.58 4.68A16.94 16.94.0 01440.93 81a20.15 20.15.0 01-10.75-2.85 19.16 19.16.0 01-7.2-8 26.51 26.51.0 01-2.57-11.93 25.77 25.77.0 012.53-11.72A18.6 18.6.0 01430 38.62a20.05 20.05.0 0110.59-2.77 17.24 17.24.0 017.61 1.63A16.19 16.19.0 01454 42.12V20zm-17.1 46.5A11.77 11.77.0 00454 58.57a11.76 11.76.0 00-2.61-8 8.58 8.58.0 00-6.84-3 8.67 8.67.0 00-6.88 3.05A11.69 11.69.0 00435 58.57a11.68 11.68.0 002.64 7.93 8.68 8.68.0 006.88 3.06 8.53 8.53.0 006.84-3.06"/><path class="cls-2" d="M99.58 21.8H84.23V6.46H99.58zM106.36-.33H77.45V28.59h28.91z"/><path class="cls-2" d="M99.58 98.9H84.23V83.55H99.58zm6.78-22.13H77.45v28.92h28.91z"/></svg></span><span class=navbar-brand__name></span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/getting-started/><span>Getting Started</span></a></li><li class=nav-item><a class=nav-link href=/docs/><span>Documentation</span></a></li><li class=nav-item><a class="nav-link active" href=/tutorials/><span>Guides</span></a></li><li class=nav-item><a class=nav-link href=/help-center/><span>Help Center</span></a></li><li class=nav-item><a class=nav-link href=/release-notes/><span>Release Notes</span></a></li></ul></div><div class="d-none d-lg-block"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.87c114b81c8b710cbfb7d703fbd82018.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.87c114b81c8b710cbfb7d703fbd82018.json data-offline-search-base-href=/ data-offline-search-max-results=10></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav" id=td-section-nav><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-tutorials-li><a href=/tutorials/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-tutorials><span>Guides</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-tutorialsdeployments-li><a href=/tutorials/deployments/ title="Node Appliance Deployments" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-tutorialsdeployments><span>Node Deployments</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-tutorialsdeploymentsaws-ha-cluster-li><a href=/tutorials/deployments/aws-ha-cluster/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialsdeploymentsaws-ha-cluster><span>AWS Requirements for HA Wireguard Cluster</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-tutorialsdeploymentsaws-ha-ztna-gateway-cluster-li><a href=/tutorials/deployments/aws-ha-ztna-gateway-cluster/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialsdeploymentsaws-ha-ztna-gateway-cluster><span>AWS Requirements for HA ZTNA Gateway Cluster</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-tutorialsdeploymentsconfigure-ha-gateway-cluster-in-aws-li><a href=/tutorials/deployments/configure-ha-gateway-cluster-in-aws/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialsdeploymentsconfigure-ha-gateway-cluster-in-aws><span>Configure HA Trustgrid Gateway Cluster in AWS</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-tutorialsdeploymentsdeploy-aws-ami-li><a href=/tutorials/deployments/deploy-aws-ami/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialsdeploymentsdeploy-aws-ami><span>Deploy a Trustgrid Node AMI in AWS</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-tutorialsdeploymentsdeploy-azure-li><a href=/tutorials/deployments/deploy-azure/ class="align-left ps-0 active td-sidebar-link td-sidebar-link__section" id=m-tutorialsdeploymentsdeploy-azure><span class=td-sidebar-nav-active-item>Deploy to Azure</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-tutorialsdeploymentsdeploy-azureazure-cli-deployment-li><a href=/tutorials/deployments/deploy-azure/azure-cli-deployment/ title="Azure CLI (az) Deployment" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-tutorialsdeploymentsdeploy-azureazure-cli-deployment><span>AZ CLI Deployment</span></a><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialsdeploymentsdeploy-azureazure-cli-deploymentaz-cli-example-li><a href=/tutorials/deployments/deploy-azure/azure-cli-deployment/az-cli-example/ title="Example Walkthrough  of Azure CLI (az) Deployment" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialsdeploymentsdeploy-azureazure-cli-deploymentaz-cli-example><span>AZ CLI Example Walkthrough</span></a></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-tutorialsdeploymentsdeploy-vsphere-li><a href=/tutorials/deployments/deploy-vsphere/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialsdeploymentsdeploy-vsphere><span>Deploy to vSphere</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-tutorialsdeploymentsros-config-li><a href=/tutorials/deployments/ros-config/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialsdeploymentsros-config><span>On a Stick Configuration</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-tutorialsmanagement-tasks-li><a href=/tutorials/management-tasks/ title="Management Operations" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-tutorialsmanagement-tasks><span>Management Ops</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialsmanagement-taskschanging-node-status-li><a href=/tutorials/management-tasks/changing-node-status/ title="Changing Node Status (Enabling / Disabling)" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialsmanagement-taskschanging-node-status><span>Changing Node Status</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialsmanagement-tasksrestart-node-li><a href=/tutorials/management-tasks/restart-node/ title="Restart the Trustgrid Service on a Node" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialsmanagement-tasksrestart-node><span>Restart Node</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialsmanagement-tasksreboot-node-li><a href=/tutorials/management-tasks/reboot-node/ title="Reboot a Node" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialsmanagement-tasksreboot-node><span>Reboot Node</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialsmanagement-tasksupgrade-nodes-li><a href=/tutorials/management-tasks/upgrade-nodes/ title="Upgrading Trustgrid Nodes" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialsmanagement-tasksupgrade-nodes><span>Upgrade Nodes</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialsmanagement-tasksdeleting-nodes-li><a href=/tutorials/management-tasks/deleting-nodes/ title="Deleting Trustgrid Nodes" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialsmanagement-tasksdeleting-nodes><span>Deleting Nodes</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialsmanagement-tasksdeleting-clusters-li><a href=/tutorials/management-tasks/deleting-clusters/ title="Deleting Trustgrid Clusters" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialsmanagement-tasksdeleting-clusters><span>Deleting Clusters</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-tutorialsoperations-runbook-li><a href=/tutorials/operations-runbook/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-tutorialsoperations-runbook><span>Operations Runbook</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialsoperations-runbookcluster-failover-response-li><a href=/tutorials/operations-runbook/cluster-failover-response/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialsoperations-runbookcluster-failover-response><span>Cluster Failover Response</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialsoperations-runbookcontrol-plane-disconnect-li><a href=/tutorials/operations-runbook/control-plane-disconnect/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialsoperations-runbookcontrol-plane-disconnect><span>Control Plane Disconnect</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialsoperations-runbooknode-down-response-li><a href=/tutorials/operations-runbook/node-down-response/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialsoperations-runbooknode-down-response><span>Node Down Response</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialsoperations-runbooksite-failover-li><a href=/tutorials/operations-runbook/site-failover/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialsoperations-runbooksite-failover><span>Site Failover</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-tutorialsinterface-tools-li><a href=/tutorials/interface-tools/ title="Network Interface Tools" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-tutorialsinterface-tools><span>Interface Tools</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialsinterface-toolssniff-interface-traffic-li><a href=/tutorials/interface-tools/sniff-interface-traffic/ title="Sniff Traffic Interface Tool" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialsinterface-toolssniff-interface-traffic><span>Sniff Traffic</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialsinterface-toolstcp-port-test-li><a href=/tutorials/interface-tools/tcp-port-test/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialsinterface-toolstcp-port-test><span>TCP Port Test</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialsinterface-toolstraffic-capture-li><a href=/tutorials/interface-tools/traffic-capture/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialsinterface-toolstraffic-capture><span>Traffic Capture</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-tutorialsremote-tools-li><a href=/tutorials/remote-tools/ title="Remote VPN Tools" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-tutorialsremote-tools><span>VPN Tools</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialsremote-toolsping-remote-virtual-host-li><a href=/tutorials/remote-tools/ping-remote-virtual-host/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialsremote-toolsping-remote-virtual-host><span>Ping Remote Virtual Host</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialsremote-toolssniff-virtual-traffic-li><a href=/tutorials/remote-tools/sniff-virtual-traffic/ title="Sniff Virtual Traffic" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialsremote-toolssniff-virtual-traffic><span>Sniff VPN Traffic</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialsremote-toolsview-virtual-route-table-li><a href=/tutorials/remote-tools/view-virtual-route-table/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialsremote-toolsview-virtual-route-table><span>View Virtual Route Table</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-tutorialsgateway-tools-li><a href=/tutorials/gateway-tools/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-tutorialsgateway-tools><span>Gateway Tools</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialsgateway-toolsmonitoring-network-hops-to-peers-li><a href=/tutorials/gateway-tools/monitoring-network-hops-to-peers/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialsgateway-toolsmonitoring-network-hops-to-peers><span>Monitoring Network Hops to Peers</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialsgateway-toolsping-remote-node-li><a href=/tutorials/gateway-tools/ping-remote-node/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialsgateway-toolsping-remote-node><span>Ping Remote Node</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-tutorialswan-interface-ip-li><a href=/tutorials/wan-interface-ip/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialswan-interface-ip><span>Changing the WAN Interface IP</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-tutorialsftp-and-ftps-li><a href=/tutorials/ftp-and-ftps/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialsftp-and-ftps><span>Configure FTP and FTPS</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-tutorialsconfig-l3-vpn-li><a href=/tutorials/config-l3-vpn/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialsconfig-l3-vpn><span>Configure Layer 3 VPN</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-tutorialsconfigure-wg-edge-node-li><a href=/tutorials/configure-wg-edge-node/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialsconfigure-wg-edge-node><span>Configure WireGuard on an Edge Node</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-tutorialscontainers-li><a href=/tutorials/containers/ title="Container Deployment Walkthrough" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-tutorialscontainers><span>Container Deployments</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialscontainersthousand-eyes-li><a href=/tutorials/containers/thousand-eyes/ title="Deploying ThousandEyes Enterprise Agent Container on Trustgrid" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialscontainersthousand-eyes><span>ThousandEyes Agent Container</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-tutorialssaml-okta-li><a href=/tutorials/saml-okta/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialssaml-okta><span>Enable SAML with Okta</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-tutorialsfind-ip-node-li><a href=/tutorials/find-ip-node/ title="Find the Public IP Address of a Node" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialsfind-ip-node><span>Finding Public IP</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-tutorialslimit-node-functionality-li><a href=/tutorials/limit-node-functionality/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialslimit-node-functionality><span>Limit Node Functionality to Current Public IP</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-tutorialslocal-console-utility-li><a href=/tutorials/local-console-utility/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-tutorialslocal-console-utility><span>Trustgrid Local Console Utility</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialslocal-console-utilityadvanced-network-config-li><a href=/tutorials/local-console-utility/advanced-network-config/ title="Advanced Network Configuration" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialslocal-console-utilityadvanced-network-config><span>Advanced Network Config</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialslocal-console-utilityremote-registration-li><a href=/tutorials/local-console-utility/remote-registration/ title="Remote Console Registration" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialslocal-console-utilityremote-registration><span>Remote Registration</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialslocal-console-utilitytroubleshooting-li><a href=/tutorials/local-console-utility/troubleshooting/ title="Troubleshooting Menu" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-tutorialslocal-console-utilitytroubleshooting><span>Troubleshooting</span></a></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"><a href=https://github.com/trustgrid/docs/tree/main/content/en/tutorials/deployments/deploy-azure/_index.md class=td-page-meta--view target=_blank rel=noopener><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
<a href=https://github.com/trustgrid/docs/edit/main/content/en/tutorials/deployments/deploy-azure/_index.md class=td-page-meta--edit target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
<a href="https://github.com/trustgrid/docs/new/main/content/en/tutorials/deployments/deploy-azure/_index.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" class=td-page-meta--child target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
<a href="https://github.com/trustgrid/docs/issues/new?title=Deploy%20to%20Azure" class=td-page-meta--issue target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> Create documentation issue</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#azure-requirements>Azure Requirements</a></li><li><a href=#vm-requirements>VM Requirements</a><ul><li><a href=#instance-size>Instance Size</a></li><li><a href=#interfaces>Interfaces</a></li><li><a href=#supported-regions>Supported Regions</a></li><li><a href=#network-access>Network Access</a></li><li><a href=#other-vm-requirements>Other VM Requirements</a></li></ul></li><li><a href=#requirements-for-ha-failover>Requirements for HA Failover</a><ul><li><a href=#azure-routing-table>Azure Routing Table</a></li><li><a href=#permissions-required-for-cluster-route-failover>Permissions Required for Cluster Route Failover</a></li></ul></li><li><a href=#deployment-process>Deployment Process</a><ul><li><a href=#participants>Participants</a></li><li><a href=#high-level-process>High-Level Process</a></li><li><a href=#deployment-methods>Deployment Methods</a></li></ul></li></ul></nav></div><div class="taxonomy taxonomy-terms-cloud taxo-categories"><h5 class=taxonomy-title>Categories</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=https://docs.trustgrid.io/categories/concepts/ data-taxonomy-term=concepts><span class=taxonomy-label>concepts</span><span class=taxonomy-count>8</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/categories/data-store/ data-taxonomy-term=data-store><span class=taxonomy-label>data store</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/categories/idps/ data-taxonomy-term=idps><span class=taxonomy-label>idps</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/categories/node/ data-taxonomy-term=node><span class=taxonomy-label>node</span><span class=taxonomy-count>9</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/categories/overview/ data-taxonomy-term=overview><span class=taxonomy-label>overview</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/categories/virtual-machines/ data-taxonomy-term=virtual-machines><span class=taxonomy-label>virtual machines</span><span class=taxonomy-count>3</span></a></li></ul></div><div class="taxonomy taxonomy-terms-cloud taxo-tags"><h5 class=taxonomy-title>Tags</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/alarm-filters/ data-taxonomy-term=alarm-filters><span class=taxonomy-label>alarm filters</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/alarms/ data-taxonomy-term=alarms><span class=taxonomy-label>alarms</span><span class=taxonomy-count>6</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/alert-suppression/ data-taxonomy-term=alert-suppression><span class=taxonomy-label>alert suppression</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/applications/ data-taxonomy-term=applications><span class=taxonomy-label>applications</span><span class=taxonomy-count>8</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/architecture/ data-taxonomy-term=architecture><span class=taxonomy-label>architecture</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/aws/ data-taxonomy-term=aws><span class=taxonomy-label>aws</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/channels/ data-taxonomy-term=channels><span class=taxonomy-label>channels</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/cluster/ data-taxonomy-term=cluster><span class=taxonomy-label>cluster</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/cluster-health/ data-taxonomy-term=cluster-health><span class=taxonomy-label>cluster health</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/cluster-management/ data-taxonomy-term=cluster-management><span class=taxonomy-label>cluster management</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/clusters/ data-taxonomy-term=clusters><span class=taxonomy-label>clusters</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/concepts/ data-taxonomy-term=concepts><span class=taxonomy-label>concepts</span><span class=taxonomy-count>11</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/containers/ data-taxonomy-term=containers><span class=taxonomy-label>containers</span><span class=taxonomy-count>3</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/control-plane-disconnect/ data-taxonomy-term=control-plane-disconnect><span class=taxonomy-label>control plane disconnect</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/data-store/ data-taxonomy-term=data-store><span class=taxonomy-label>data store</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/domain/ data-taxonomy-term=domain><span class=taxonomy-label>domain</span><span class=taxonomy-count>8</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/event-types/ data-taxonomy-term=event-types><span class=taxonomy-label>event types</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/events/ data-taxonomy-term=events><span class=taxonomy-label>events</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/failover/ data-taxonomy-term=failover><span class=taxonomy-label>failover</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/help/ data-taxonomy-term=help><span class=taxonomy-label>help</span><span class=taxonomy-count>5</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/layer-4/ data-taxonomy-term=layer-4><span class=taxonomy-label>layer 4</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/networking/ data-taxonomy-term=networking><span class=taxonomy-label>networking</span><span class=taxonomy-count>8</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/node/ data-taxonomy-term=node><span class=taxonomy-label>node</span><span class=taxonomy-count>6</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/overview/ data-taxonomy-term=overview><span class=taxonomy-label>overview</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/rewrite/ data-taxonomy-term=rewrite><span class=taxonomy-label>rewrite</span><span class=taxonomy-count>7</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/s3/ data-taxonomy-term=s3><span class=taxonomy-label>s3</span><span class=taxonomy-count>3</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/security/ data-taxonomy-term=security><span class=taxonomy-label>security</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/tag/ data-taxonomy-term=tag><span class=taxonomy-label>tag</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/troubleshoot/ data-taxonomy-term=troubleshoot><span class=taxonomy-label>troubleshoot</span><span class=taxonomy-count>5</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/tunnels/ data-taxonomy-term=tunnels><span class=taxonomy-label>tunnels</span><span class=taxonomy-count>5</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/virtual-machines/ data-taxonomy-term=virtual-machines><span class=taxonomy-label>virtual machines</span><span class=taxonomy-count>3</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/vrfs/ data-taxonomy-term=vrfs><span class=taxonomy-label>vrfs</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/wireguard/ data-taxonomy-term=wireguard><span class=taxonomy-label>wireguard</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/ztna/ data-taxonomy-term=ztna><span class=taxonomy-label>ztna</span><span class=taxonomy-count>8</span></a></li></ul></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=https://docs.trustgrid.io/tutorials/>Guides</a></li><li class=breadcrumb-item><a href=https://docs.trustgrid.io/tutorials/deployments/>Node Deployments</a></li><li class="breadcrumb-item active" aria-current=page>Deploy to Azure</li></ol></nav><div class=td-content><h1>Deploy to Azure</h1><header class=article-meta><p class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>&nbsp; 7 minute read &nbsp;</p></header><h2 id=azure-requirements>Azure Requirements</h2><ul><li>An Azure subscription. If you don&rsquo;t have one, create a <a href=https://azure.microsoft.com/free/>free account</a></li><li>An Azure resource group to deploy the resources into</li><li>An Azure Virtual Network (vNet) with at least two subnets:<ul><li>An &ldquo;outside&rdquo; subnet for the appliance to connect to the Trustgrid control plane and data plane gateways, and accept incoming connections if the Azure Trustgrid appliance will be acting as a <a href=/docs/nodes/gateway/>data plane gateway</a></li><li>An &ldquo;inside&rdquo; subnet for communicating with other virtual machines and services within the Azure vNet</li><li><strong>(For Clustered Appliances)</strong> An <a href=#azure-route-table>Azure routing table</a> associated with the &ldquo;inside&rdquo; subnet.</li></ul></li></ul><h2 id=vm-requirements>VM Requirements</h2><table><thead><tr><th>Requirement</th><th>Description</th></tr></thead><tbody><tr><td>Disk Size</td><td>At least 30 GB</td></tr><tr><td>Interfaces</td><td><ul><li>1 Public with a Public IP address</li><li>1 Private</li><ul></td></tr><tr><td>CPU & RAM</td><td>See <a href=/tutorials/deployments/deploy-azure/#instance-size>Instance Type below</a> for recommendations</td></tr></tbody></table><h3 id=instance-size>Instance Size</h3><p>Trustgrid has validated using the <a href=https://learn.microsoft.com/en-us/azure/virtual-machines/sizes-b-series-burstable>B-series burstable - Azure Virtual Machines</a> instance type.</p><p>VPN throughput is tied to CPU the recommended size depends on roles, expected throughput.</p><ul><li>For Gateway nodes expecting up to ~200Mbps throughput, Trustgrid recommends the Standard_B4ms or larger</li><li>For Edge nodes expecting less than 100Mbps throughput, Trustgrid recommends the Standard_B2s or Standard_B2ms or larger</li></ul><h3 id=interfaces>Interfaces</h3><p>One WAN interface with a public IP and one LAN interface on a private subnet. The nodes will need to be able to route to all required hosts/applications that need to communicate across the Trustgrid virtual network.</p><p>The LAN interface needs to have <strong>IP Forwarding Enabled</strong> in order to forward the traffic across the tunnel.</p><p><img src=azure-ip-config.png alt="IP Forwarding"></p><p>See <a href=https://learn.microsoft.com/en-us/azure/virtual-network/virtual-networks-udr-overview>Azure virtual network traffic routing</a>.</p><h3 id=supported-regions>Supported Regions</h3><p>The Trustgrid official community image, <code>trustgrid-node-2204-prod</code>, in the public gallery <code>trustgrid-45680719-9aa7-43b9-a376-dc03bcfdb0ac</code> is currently published in the following region. If you need to deploy in another region please contact Trustgrid support. If you are not a direct customer of Trustgrid, please check with your vendor that is utilizing Trustgrid to have them contact support.</p><table><thead><tr><th>Region Display Name</th><th>Region Name</th></tr></thead><tbody><tr><td>East US</td><td>eastus</td></tr><tr><td>Central US</td><td>centralus</td></tr><tr><td>North Central US</td><td>northcentralus</td></tr><tr><td>South Central US</td><td>southcentralus</td></tr><tr><td>West US</td><td>westus</td></tr></tbody></table><h3 id=network-access>Network Access</h3><p>For gateways:</p><ul><li>Outbound internet access to the <a href=https://docs.trustgrid.io/help-center/kb/site-requirements/>Trustgrid control plane networks</a> and ability to resolve public DNS names.</li><li>Inbound access required is the TCP port defined for the Trustgrid gateway service to listen on. Edge nodes will connect to the gateways public IP and port defined. The default port used is 8443.</li></ul><p>For edge nodes:</p><ul><li>Outbound internet access to the <a href=https://docs.trustgrid.io/help-center/kb/site-requirements/>Trustgrid control plane networks</a>, outbound access to the IP and ports of the Trustgrid gateways, and ability to resolve public DNS names.</li><li>No inbound access is required on the public interface.</li></ul><p>For all clustered nodes:</p><ul><li>The cluster heartbeat runs on the LAN/inside interface on TCP Port 9000. This port will need to be open between both Trustgrid Gateways for failover to work correctly.</li></ul><h3 id=other-vm-requirements>Other VM Requirements</h3><ul><li><a href=https://learn.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/qs-configure-portal-windows-vm>System-assigned Managed Identity</a> needs to be enabled for both VMs in the cluster.<figure class=centered-image><img src=system-managed-identity.png alt="System-assigned Managed Identity" style=display:block;margin-left:auto;margin-right:auto;width:80%></figure></li><li><a href=https://learn.microsoft.com/en-us/azure/virtual-machines/boot-diagnostics>Boot Diagnostics</a> needs to be enabled to allow access via the Serial Console</li></ul><h2 id=requirements-for-ha-failover>Requirements for HA Failover</h2><h3 id=azure-routing-table>Azure Routing Table</h3><p>An Azure routing table resource needs to be associated with the LAN interface&rsquo;s subnet.</p><h4 id=view-lan-subnet-routing-table>View LAN Subnet Routing Table</h4><ol><li>In the Azure Portal search for Virtual Networks and select the service</li><li>From the list of Virtual Networks select your target Virtual Network</li><li>From the navigation panel select Subnets</li><li>Select your inside/private subnet that is attached to the LAN interface of your Trustgrid VMs</li><li>There should be a route table<figure class=centered-image><img src=azure-route-table.png alt="Example subnet showing assigned Route Table" style=display:block;margin-left:auto;margin-right:auto;width:60%></figure></li></ol><h4 id=create-route-table-for-lan-subnet>Create Route Table for LAN Subnet</h4><ol><li>If there is no Route Table associated with your LAN/inside/private subnet you will need to add it.</li><li>In the Azure portal search for Route Tables and select the service</li><li>Click the +Create button</li><li>Select the Resource Group that contains your Virtual Network and VMs</li><li>Select the Region that your VMs are deployed in</li><li>Give the Route Table a name consistent with your naming conventions</li><li>(Optional) change the Propagate Gateway routes option.<figure class=centered-image><img src=propagate-routes.png alt="Propagate Routes Option" style=display:block;margin-left:auto;margin-right:auto;width:70%></figure></li><li>Click Review + Create, review then click Review + Create again</li><li>Repeat the above steps to “View LAN Subnet Routing Table” and change the route table from None to the newly created Route Table.</li><li>Save the change</li></ol><h3 id=permissions-required-for-cluster-route-failover>Permissions Required for Cluster Route Failover</h3><p>Copy this sample json file for use in creating a custom role with the required permissions. See process below.</p><blockquote><p>The assignableScopes section will need to be modified to represent the resource information of the target Azure account.</p></blockquote><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>&#34;properties&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#204a87;font-weight:700>&#34;roleName&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;tg-route-table&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>		<span style=color:#204a87;font-weight:700>&#34;description&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;manage azure route table&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>		<span style=color:#204a87;font-weight:700>&#34;assignableScopes&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>		<span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>		<span style=color:#204a87;font-weight:700>&#34;permissions&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>			<span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>				<span style=color:#204a87;font-weight:700>&#34;actions&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>					<span style=color:#4e9a06>&#34;Microsoft.Network/networkWatchers/nextHop/action&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>					<span style=color:#4e9a06>&#34;Microsoft.Network/networkInterfaces/effectiveRouteTable/action&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>					<span style=color:#4e9a06>&#34;Microsoft.Network/routeTables/routes/delete&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>					<span style=color:#4e9a06>&#34;Microsoft.Network/routeTables/routes/write&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>					<span style=color:#4e9a06>&#34;Microsoft.Network/routeTables/routes/read&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>					<span style=color:#4e9a06>&#34;Microsoft.Network/routeTables/join/action&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>					<span style=color:#4e9a06>&#34;Microsoft.Network/routeTables/delete&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>					<span style=color:#4e9a06>&#34;Microsoft.Network/routeTables/write&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>					<span style=color:#4e9a06>&#34;Microsoft.Network/routeTables/read&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>					<span style=color:#4e9a06>&#34;Microsoft.Network/networkInterfaces/read&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>					<span style=color:#4e9a06>&#34;Microsoft.Network/virtualNetworks/read&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>					<span style=color:#4e9a06>&#34;Microsoft.Compute/virtualMachines/read&#34;</span>
</span></span><span style=display:flex><span>				<span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>				<span style=color:#204a87;font-weight:700>&#34;notActions&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[],</span>
</span></span><span style=display:flex><span>				<span style=color:#204a87;font-weight:700>&#34;dataActions&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[],</span>
</span></span><span style=display:flex><span>				<span style=color:#204a87;font-weight:700>&#34;notDataActions&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[]</span>
</span></span><span style=display:flex><span>			<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>		<span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span></span></span></code></pre></div><ol><li><ol><li>A custom role needs to be created in the Azure subscription that allows the Trustgrid nodes to update the route table when failover occurs</li><li>Create the custom role<ol><li><p>In the Azure portal search for “Subscriptions” and select the Subscriptions service</p></li><li><p>Select the subscription that contains the Trustgrid VMs</p></li><li><p>Select “Access control (IAM),” then click “+Add”, then “Add custom role”</p><p><img src=add-custom-role.png alt="Add Custom Role"></p></li><li><p>Save the JSON above to a file named <code>azure-custom-role-sample.json</code>.</p></li><li><p>Select “Start from JSON” and from the file selector, select the downloaded json file.</p><p><img src=create-custom-role.png alt="Create Custom Role"></p></li><li><p>Optionally, update the role name to meet your internal naming conventions.</p></li><li><p>Click <code>Next</code>.</p></li><li><p>On the Permissions page you will see the permissions that will be granted. Click <code>Next</code> again.</p></li><li><p>On the Assignable Scopes page click +Add Assignable Scope</p><ol><li><p>From the Type select Resource Group</p></li><li><p>From the Subscription, select the subscription your VMs and virtual networks are in.</p></li><li><p>From the Select pane on the right search for and select the Resource Group containing you VM’s</p><p><img src=select-group.png alt="Resource Group"></p></li><li><p>Click <code>Select</code> and then <code>Next</code>.</p></li></ol></li><li><p>On the JSON page, click the <code>Next</code> button.</p></li><li><p>Click Review + Create, then click Create.</p></li></ol></li></ol></li><li><p>Assign the custom role to your Trustgrid VM’s system-assigned</p><ol><li><p>In the Azure portal search for Resource Groups and select the service</p></li><li><p>Select your target Resource Group</p></li><li><p>Select the Access Control (IAM) panel, then click +Add, then “Add role assignment”</p><p><img src=add-role.png alt="Add Role Assignment"></p></li><li><p>Search for and select the desired role and click Next</p><p><img src=role-list.png alt="Find Role"></p></li><li><p>Under “Assign access to” select “Managed Identity” then click +Select members</p><p><img src=select-members.png alt="Select Members"></p></li><li><p>From the Managed Identity dropdown select Virtual Machine</p></li><li><p>Select the identity for your first Trustgrid VM</p><p><img src=subscriptions.png alt=Subscription></p></li><li><p>Click select.</p></li><li><p>Click +Select members again and repeat with your second Trustgrid VM</p></li><li><p>Click “Review + Assign” then “Review + Assign” a second time</p></li></ol></li></ol><blockquote><p>These permissions can take some time to go into effect.</p></blockquote><h2 id=deployment-process>Deployment Process</h2><p>One of more Virtual Machines will need to be deployed into the target Azure subscription to act as the Trustgrid nodes using the official community image. Then the <a href=/tutorials/local-console-utility/remote-registration/>remote registration process</a> can be used to activate the nodes in the Trustgrid portal.</p><h3 id=participants>Participants</h3><ul><li>Site Tech - User(s) with permissions and skills to deploy new instances in Azure, create the required Managed System Identity shown above, and make changes in Azure to allow the required network connectivity</li><li>Trustgrid User - User with permissions to <a href=/tutorials/local-console-utility/remote-registration/#portal-activation-process>Activate nodes</a> in the Trustgrid portal (or API)</li></ul><blockquote><p>If the Site Tech is not part of the organization that is a Trustgrid&rsquo;s direct customer, Trustgrid&rsquo;s professional service team will need documented approval from that customer before proceeding with assisting in the deployment.</p></blockquote><h3 id=high-level-process>High-Level Process</h3><ol><li>The Site Tech should be able to complete the following steps independently:<ol><li>Build out prerequisite resources including Resource Groups, vNets, subnets and routing tables in Azure</li></ol><ul><li>For single node deployments:<ol><li>Create VM Instances based of the official Trustgrid community image</li></ol></li><li>For clustered deployments:<ol><li>Create a <a href=#azure-routing-table>routing table for the in LAN interface subnet</a> if it does not already exist</li><li>Create two VM Instances based of the official Trustgrid community image</li><li>Create the Azure IAM role as defined above</li></ol></li></ul><ol><li>Use the Azure VM Serial Console to start the registration process, this code then needs to be communicated securely to the Trustgrid User.</li></ol></li><li>Trustgrid Tech -<ol><li>Activate the device with the target organization</li><li>Confirm healthy functionality and connectivity to the required gateways</li><li>Configure the nodes as needed (e.g. clustering, VPN, L4proxy)</li></ol></li></ol><h3 id=deployment-methods>Deployment Methods</h3><ul><li><a href=/tutorials/deployments/deploy-azure/>Deploy via Azure command line tool</a></li></ul><p><em>Documentation Coming Soon for&mldr;</em></p><ul><li>Deploy via the Azure Portal</li><li>Deploy via Azure Bicep modules</li></ul><div class=section-index><hr class=panel-line><div class=entry><h5><a href=/tutorials/deployments/deploy-azure/azure-cli-deployment/>Azure CLI (az) Deployment</a></h5><p>Details how to deploy a Trustgrid appliance and related resources using the Azure CLI (az) commands.</p></div></div><style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style><div class=d-print-none><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes">Glad to hear it! Please <a href=https://github.com/trustgrid/docs/issues/new>tell us how we can improve</a>.</p><p class="feedback--response feedback--response-no">Sorry to hear that. Please <a href=https://github.com/trustgrid/docs/issues/new>tell us how we can improve</a>.</p></div><script>const yesButton=document.querySelector(".feedback--answer-yes"),noButton=document.querySelector(".feedback--answer-no"),yesResponse=document.querySelector(".feedback--response-yes"),noResponse=document.querySelector(".feedback--response-no"),disableButtons=()=>{yesButton.disabled=!0,noButton.disabled=!0},sendFeedback=e=>{if(typeof ga!="function")return;const t={command:"send",hitType:"event",category:"Helpful",action:"click",label:window.location.pathname,value:e};ga(t.command,t.hitType,t.category,t.action,t.label,t.value)};yesButton.addEventListener("click",()=>{yesResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(1)}),noButton.addEventListener("click",()=>{noResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(0)})</script><br></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=LinkedIn aria-label=LinkedIn><a target=_blank rel=noopener href=https://www.linkedin.com/company/trustgrid/ aria-label=LinkedIn><i class="fab fa-linkedin"></i></a></li></ul></div><div class="col-6 col-sm-4 text-end text-xs-center order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=GitHub aria-label=GitHub><a target=_blank rel=noopener href=https://github.com/trustgrid/docs aria-label=GitHub><i class="fab fa-github"></i></a></li></ul></div><div class="td-footer__copyright-etc col-12 col-sm-4 text-center py-2 order-sm-2"><span>&copy; 2024 Trustgrid All Rights Reserved</span>
<span class=ms-1><a href=https://trustgrid.io target=_blank rel=noopener>Privacy Policy</a></span></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/mermaid@9.3.0/dist/mermaid.min.js integrity="sha512-ku2nmBrzAXY5YwohzTqLYH1/lvyMrpTVxgQKrvTabd/b/uesqltLORdmpVapYv6QhZVCLUX6wkvFaKOAY4xpUA==" crossorigin=anonymous></script>
<script src=/js/main.min.a0ee49b4702cbaeb6728b1064a964a21fc2cd7d03364bbaa508cfb2f1af65935.js integrity="sha256-oO5JtHAsuutnKLEGSpZKIfws19AzZLuqUIz7Lxr2WTU=" crossorigin=anonymous></script>
<script src=/js/prism.js></script>
<script src=/js/tabpane-persist.js></script></body></html>