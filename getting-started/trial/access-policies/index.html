<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Implement Access Policy Restrictions | </title><meta name=description content="Configure access policies to limit the traffic allowed on the virtual network"><meta property="og:url" content="https://docs.trustgrid.io/getting-started/trial/access-policies/"><meta property="og:title" content="Implement Access Policy Restrictions"><meta property="og:description" content="Configure access policies to limit the traffic allowed on the virtual network"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="getting-started"><meta itemprop=name content="Implement Access Policy Restrictions"><meta itemprop=description content="Configure access policies to limit the traffic allowed on the virtual network"><meta itemprop=wordCount content="1179"><meta name=twitter:card content="summary"><meta name=twitter:title content="Implement Access Policy Restrictions"><meta name=twitter:description content="Configure access policies to limit the traffic allowed on the virtual network"><link rel=preload href=/scss/main.min.607e5d043657819328139fdeb2547f20d9c0f96a013036698779bf44ec3c53f1.css as=style><link href=/scss/main.min.607e5d043657819328139fdeb2547f20d9c0f96a013036698779bf44ec3c53f1.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script><link rel=stylesheet href=/css/prism.css><script async src="https://www.googletagmanager.com/gtag/js?id=UA-99793053-3"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-99793053-3")}</script></head><body class=td-page><header><nav class="td-navbar js-navbar-scroll"><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" data-name="Layer 1" viewBox="0 0 469 106"><defs><style>.cls-1{fill:#6b6b6b}.cls-2{fill:#226ce0}</style></defs><title>Trustgrid-Logo-Grey</title><path class="cls-1" d="M.35 28.58H29.26V-.33H.35zM7.13 6.45H22.47V21.8H7.13z"/><path class="cls-1" d="M67.82-.33H38.9V28.58H67.82zM61 21.8H45.68V6.45H61z"/><path class="cls-1" d="M.35 67.13H29.26V38.22H.35zM7.13 45H22.47V60.35H7.13z"/><path class="cls-1" d="M106.36 38.22H77.45v12.3H67.82V41.27L85.26 23.83l-3.06-3L64.76 38.22H38.9V67.13H67.82V54.83h9.63v12.3h12.3V80.39h4.31V67.13h12.3zM61 60.35H45.68V45H61zm38.55.0H84.23V45H99.58z"/><path class="cls-1" d="M.35 105.69H29.26V76.77H.35zM7.13 83.55H22.47V98.9H7.13z"/><path class="cls-1" d="M38.9 105.69H67.82V76.77H38.9zm6.78-22.14H61V98.9H45.68z"/><path class="cls-2" d="M153.94 77.54a18.64 18.64.0 01-10.1 3.17 11.44 11.44.0 01-8.3-3c-2.12-2-3.18-5.12-3.18-9.24V44.56h-6.11V38.78h6.11V27.22H140V38.78h13.2v5.78H140V67q0 3.59 1.31 5.13a4.8 4.8.0 003.91 1.55 13.59 13.59.0 006.67-2z"/><path class="cls-2" d="M176.74 39.56A18 18 0 01186 37.07V44.4q-6.58-.24-10.66 3.42a14.51 14.51.0 00-4.64 9.85V80.39h-7.57V37.32h7.57V46.6a15.52 15.52.0 016-7"/><path class="cls-2" d="M232.34 37.32V80.39h-7.65V71.27q-4.23 9.2-16 9.36-7.48.0-11.72-4.44t-4.24-12.25V37.32h7.66V61.9q0 5.46 3 8.51a10.87 10.87.0 008.18 3.06 12.11 12.11.0 009.57-4.28 16 16 0 003.54-10.7V37.32z"/><path class="cls-2" d="M260.47 44.24a21.21 21.21.0 00-6.15-1 10.48 10.48.0 00-5.49 1.26 4.21 4.21.0 00-2.08 3.87 4.3 4.3.0 002.32 4 34.68 34.68.0 007 2.73 54.86 54.86.0 017.33 2.6 13 13 0 014.85 3.83 10.51 10.51.0 012 6.67 10.58 10.58.0 01-4.6 9.29 19.65 19.65.0 01-11.44 3.17 28.35 28.35.0 01-9.32-1.55 21.07 21.07.0 01-7.61-4.39l2.85-5.54a20.07 20.07.0 006.63 3.91 22 22 0 007.69 1.47 11.45 11.45.0 006-1.39 4.61 4.61.0 002.28-4.23 4.82 4.82.0 00-2.4-4.4 32.85 32.85.0 00-7.29-2.93 48.4 48.4.0 01-7-2.48 12.43 12.43.0 01-4.64-3.71A10 10 0 01239.5 49q0-6 4.4-9a19.07 19.07.0 0111-3 27.13 27.13.0 017.69 1.1 23 23 0 016.56 3l-2.77 5.78a26 26 0 00-5.9-2.6"/><path class="cls-2" d="M303.42 77.54a18.64 18.64.0 01-10.1 3.17 11.44 11.44.0 01-8.3-3c-2.12-2-3.18-5.12-3.18-9.24V44.56h-6.11V38.78h6.11V27.22h7.65V38.78h13.19v5.78H289.49V67c0 2.39.44 4.1 1.3 5.13a4.81 4.81.0 003.91 1.55 13.62 13.62.0 006.68-2z"/><path class="cls-1" d="M352.92 36.34V76.48a19.18 19.18.0 01-3 10.71 19.61 19.61.0 01-8.43 7.08A29.79 29.79.0 01329 96.75a36.74 36.74.0 01-10.66-1.54 34 34 0 01-9-4.16l5.05-10a25.68 25.68.0 006.51 3.17 22.5 22.5.0 007.08 1.14 12.11 12.11.0 007.74-2.27 7.52 7.52.0 002.85-6.2V72.16Q334.12 77.95 326 78a17.69 17.69.0 01-16.41-10.14 24.71 24.71.0 01-2.4-11.12 24.42 24.42.0 012.32-10.91A17.35 17.35.0 01316 38.46a17.92 17.92.0 019.61-2.61A17.42 17.42.0 01333 37.36a14.36 14.36.0 015.5 4.35V36.34zM336.07 64.51a11 11 0 002.44-7.41 11.16 11.16.0 00-2.44-7.49 8.69 8.69.0 00-12.91.0 11 11 0 00-2.48 7.45 10.85 10.85.0 002.48 7.41 8.18 8.18.0 006.47 2.85 8.08 8.08.0 006.44-2.85"/><path class="cls-1" d="M383.9 37.8a16.63 16.63.0 018.26-2V49c-.49.0-1.22-.08-2.2-.08a13.4 13.4.0 00-8.3 2.4A9.18 9.18.0 00378 57.92V80.39H363.5v-44H378v7.33a16 16 0 015.9-5.87"/><path class="cls-1" d="M411.09 18.22a7.55 7.55.0 012.16 5.58 7.59 7.59.0 01-2.16 5.54 8 8 0 01-11 0 7.59 7.59.0 01-2.16-5.54 7.55 7.55.0 012.16-5.58 8.1 8.1.0 0111 0M398.51 36.34h14.41V80.39H398.51z"/><path class="cls-1" d="M468.45 20V80.39H454v-5.7a14.92 14.92.0 01-5.58 4.68A16.94 16.94.0 01440.93 81a20.15 20.15.0 01-10.75-2.85 19.16 19.16.0 01-7.2-8 26.51 26.51.0 01-2.57-11.93 25.77 25.77.0 012.53-11.72A18.6 18.6.0 01430 38.62a20.05 20.05.0 0110.59-2.77 17.24 17.24.0 017.61 1.63A16.19 16.19.0 01454 42.12V20zm-17.1 46.5A11.77 11.77.0 00454 58.57a11.76 11.76.0 00-2.61-8 8.58 8.58.0 00-6.84-3 8.67 8.67.0 00-6.88 3.05A11.69 11.69.0 00435 58.57a11.68 11.68.0 002.64 7.93 8.68 8.68.0 006.88 3.06 8.53 8.53.0 006.84-3.06"/><path class="cls-2" d="M99.58 21.8H84.23V6.46H99.58zM106.36-.33H77.45V28.59h28.91z"/><path class="cls-2" d="M99.58 98.9H84.23V83.55H99.58zm6.78-22.13H77.45v28.92h28.91z"/></svg></span><span class=navbar-brand__name></span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class="nav-link active" href=/getting-started/><span>Getting Started</span></a></li><li class=nav-item><a class=nav-link href=/docs/><span>Documentation</span></a></li><li class=nav-item><a class=nav-link href=/tutorials/><span>Guides</span></a></li><li class=nav-item><a class=nav-link href=/help-center/><span>Help Center</span></a></li><li class=nav-item><a class=nav-link href=/release-notes/><span>Release Notes</span></a></li></ul></div><div class="d-none d-lg-block"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.43c2559f237fc9e416329a8de5805acf.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.43c2559f237fc9e416329a8de5805acf.json data-offline-search-base-href=/ data-offline-search-max-results=10></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="td-sidebar-nav collapse" id=td-section-nav><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-getting-started-li><a href=/getting-started/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-getting-started><span>Getting Started</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedbasic-architecture-li><a href=/getting-started/basic-architecture/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedbasic-architecture><span>Basic Architecture</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-getting-startedtrial-li><a href=/getting-started/trial/ title="Getting Started with a Trial Account" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-getting-startedtrial><span>Trial Quick Start</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedtrialrequest-trial-li><a href=/getting-started/trial/request-trial/ title="Request Trustgrid Trial Account" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedtrialrequest-trial><span>Request Trial</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-getting-startedtrialbase-setup-li><a href=/getting-started/trial/base-setup/ title="Initial Agent Setup" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-getting-startedtrialbase-setup><span>Initial Setup</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-getting-startedtrialbase-setupubuntu2204-li><a href=/getting-started/trial/base-setup/ubuntu2204/ title="Deploying Ubuntu VMs" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedtrialbase-setupubuntu2204><span>Ubuntu VMs</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-getting-startedtrialaccess-policies-li><a href=/getting-started/trial/access-policies/ title="Implement Access Policy Restrictions" class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id=m-getting-startedtrialaccess-policies><span class=td-sidebar-nav-active-item>Access Policies</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedtrialsubnet-routing-li><a href=/getting-started/trial/subnet-routing/ title="Configure Subnet Routing" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedtrialsubnet-routing><span>Subnet Routing</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-starteddeployment-li><a href=/getting-started/deployment/ title="Node Deployment" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-starteddeployment><span>Deployment</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startednetworking-li><a href=/getting-started/networking/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startednetworking><span>Networking</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-getting-startedsecurity-li><a href=/getting-started/security/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-getting-startedsecurity><span>Security</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-getting-startedsecuritycustomer-responsibilities-li><a href=/getting-started/security/customer-responsibilities/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedsecuritycustomer-responsibilities><span>Customer Responsibilities</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-getting-startedsecuritytrustgrid-node-access-li><a href=/getting-started/security/trustgrid-node-access/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedsecuritytrustgrid-node-access><span>Trustgrid's Access to Nodes</span></a></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"><a href=https://github.com/trustgrid/docs/tree/main/content/en/getting-started/trial/access-policies/index.md class="td-page-meta--view td-page-meta__view" target=_blank rel=noopener><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
<a href=https://github.com/trustgrid/docs/edit/main/content/en/getting-started/trial/access-policies/index.md class="td-page-meta--edit td-page-meta__edit" target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
<a href="https://github.com/trustgrid/docs/new/main/content/en/getting-started/trial/access-policies?filename=change-me.md&amp;value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" class="td-page-meta--child td-page-meta__child" target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
<a href="https://github.com/trustgrid/docs/issues/new?title=Implement%20Access%20Policy%20Restrictions" class="td-page-meta--issue td-page-meta__issue" target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> Create documentation issue</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#high-level-steps>High-Level Steps</a></li><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#step-1---generate-traffic>Step 1 - Generate Traffic</a><ul><li><a href=#start-tcp-netcat-listener-on-agent1>Start TCP Netcat listener on agent1</a></li><li><a href=#send-traffic-from-agent2>Send Traffic from agent2</a></li><li><a href=#stop-tcp-netcat-listener-on-agent1>Stop TCP Netcat listener on agent1</a></li><li><a href=#confirm-ping-icmp-traffic>Confirm Ping (ICMP) Traffic</a></li></ul></li><li><a href=#step-2---deny-all-traffic>Step 2 - Deny All Traffic</a><ul><li><a href=#update-existing-access-policy>Update Existing Access Policy</a></li><li><a href=#confirm-icmp-traffic-is-blocked>Confirm ICMP Traffic is Blocked</a></li><li><a href=#confirm-tcp-traffic-is-blocked>Confirm TCP Traffic is Blocked</a></li></ul></li><li><a href=#step-3---allow-desired-traffic>Step 3 - Allow Desired Traffic</a><ul><li><a href=#allow-all-icmp>Allow all ICMP</a></li><li><a href=#confirm-icmp-allowed>Confirm ICMP Allowed</a></li><li><a href=#allow-specific-tcp>Allow Specific TCP</a></li><li><a href=#confirm-tcp-5000-allowed>Confirm TCP 5000 Allowed</a></li></ul></li><li><a href=#next-steps>Next Steps</a></li></ul></nav></div><div class="taxonomy taxonomy-terms-cloud taxo-categories"><h5 class=taxonomy-title>Categories</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=https://docs.trustgrid.io/categories/concepts/ data-taxonomy-term=concepts><span class=taxonomy-label>Concepts</span><span class=taxonomy-count>8</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/categories/data-store/ data-taxonomy-term=data-store><span class=taxonomy-label>Data Store</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/categories/idps/ data-taxonomy-term=idps><span class=taxonomy-label>Idps</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/categories/monitoring/ data-taxonomy-term=monitoring><span class=taxonomy-label>Monitoring</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/categories/node/ data-taxonomy-term=node><span class=taxonomy-label>Node</span><span class=taxonomy-count>9</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/categories/overview/ data-taxonomy-term=overview><span class=taxonomy-label>Overview</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/categories/virtual-machines/ data-taxonomy-term=virtual-machines><span class=taxonomy-label>Virtual Machines</span><span class=taxonomy-count>3</span></a></li></ul></div><div class="taxonomy taxonomy-terms-cloud taxo-tags"><h5 class=taxonomy-title>Tags</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/alarm-filters/ data-taxonomy-term=alarm-filters><span class=taxonomy-label>Alarm Filters</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/alarms/ data-taxonomy-term=alarms><span class=taxonomy-label>Alarms</span><span class=taxonomy-count>6</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/alert-suppression/ data-taxonomy-term=alert-suppression><span class=taxonomy-label>Alert Suppression</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/applications/ data-taxonomy-term=applications><span class=taxonomy-label>Applications</span><span class=taxonomy-count>8</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/architecture/ data-taxonomy-term=architecture><span class=taxonomy-label>Architecture</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/aws/ data-taxonomy-term=aws><span class=taxonomy-label>Aws</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/channels/ data-taxonomy-term=channels><span class=taxonomy-label>Channels</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/cluster/ data-taxonomy-term=cluster><span class=taxonomy-label>Cluster</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/cluster-health/ data-taxonomy-term=cluster-health><span class=taxonomy-label>Cluster Health</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/cluster-management/ data-taxonomy-term=cluster-management><span class=taxonomy-label>Cluster Management</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/clusters/ data-taxonomy-term=clusters><span class=taxonomy-label>Clusters</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/concepts/ data-taxonomy-term=concepts><span class=taxonomy-label>Concepts</span><span class=taxonomy-count>11</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/containers/ data-taxonomy-term=containers><span class=taxonomy-label>Containers</span><span class=taxonomy-count>3</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/control-plane-disconnect/ data-taxonomy-term=control-plane-disconnect><span class=taxonomy-label>Control Plane Disconnect</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/data-store/ data-taxonomy-term=data-store><span class=taxonomy-label>Data Store</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/domain/ data-taxonomy-term=domain><span class=taxonomy-label>Domain</span><span class=taxonomy-count>8</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/event-types/ data-taxonomy-term=event-types><span class=taxonomy-label>Event Types</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/events/ data-taxonomy-term=events><span class=taxonomy-label>Events</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/failover/ data-taxonomy-term=failover><span class=taxonomy-label>Failover</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/help/ data-taxonomy-term=help><span class=taxonomy-label>Help</span><span class=taxonomy-count>5</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/layer-4/ data-taxonomy-term=layer-4><span class=taxonomy-label>Layer 4</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/monitoring/ data-taxonomy-term=monitoring><span class=taxonomy-label>Monitoring</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/networking/ data-taxonomy-term=networking><span class=taxonomy-label>Networking</span><span class=taxonomy-count>8</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/node/ data-taxonomy-term=node><span class=taxonomy-label>Node</span><span class=taxonomy-count>6</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/orders/ data-taxonomy-term=orders><span class=taxonomy-label>Orders</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/overview/ data-taxonomy-term=overview><span class=taxonomy-label>Overview</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/provisioning/ data-taxonomy-term=provisioning><span class=taxonomy-label>Provisioning</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/rewrite/ data-taxonomy-term=rewrite><span class=taxonomy-label>Rewrite</span><span class=taxonomy-count>7</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/s3/ data-taxonomy-term=s3><span class=taxonomy-label>S3</span><span class=taxonomy-count>3</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/security/ data-taxonomy-term=security><span class=taxonomy-label>Security</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/tag/ data-taxonomy-term=tag><span class=taxonomy-label>Tag</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/troubleshoot/ data-taxonomy-term=troubleshoot><span class=taxonomy-label>Troubleshoot</span><span class=taxonomy-count>5</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/tunnels/ data-taxonomy-term=tunnels><span class=taxonomy-label>Tunnels</span><span class=taxonomy-count>5</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/upgrade-manager/ data-taxonomy-term=upgrade-manager><span class=taxonomy-label>Upgrade Manager</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/virtual-machines/ data-taxonomy-term=virtual-machines><span class=taxonomy-label>Virtual Machines</span><span class=taxonomy-count>3</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/vrfs/ data-taxonomy-term=vrfs><span class=taxonomy-label>VRFs</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://docs.trustgrid.io/tags/ztna/ data-taxonomy-term=ztna><span class=taxonomy-label>Ztna</span><span class=taxonomy-count>8</span></a></li></ul></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/getting-started/>Getting Started</a></li><li class=breadcrumb-item><a href=/getting-started/trial/>Trial Quick Start</a></li><li class="breadcrumb-item active" aria-current=page>Access Policies</li></ol></nav><div class=td-content><h1>Implement Access Policy Restrictions</h1><div class=lead>Configure access policies to limit the traffic allowed on the virtual network</div><header class=article-meta><p class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>&nbsp; 6 minute read &nbsp;</p></header><p>When designing a network from a zero-trust, least-privilege mindset, all agents and appliances should restrict access as much as possible both to each other and their adjacent network resources. Trustgrid allows for granular control over what traffic is permitted across the virtual network using <a href=/docs/domain/virtual-networks/access-policy/>access policies</a>. The default virtual network was created with an &ldquo;Allow All&rdquo; policy to facilitate initial connectivity during the trial period.</p><p>In this section, we will update the policy to restrict traffic between the two agents.</p><h2 id=high-level-steps>High-Level Steps</h2><ul><li>Generate TCP traffic between the agents</li><li>Create an access policy to deny all traffic and verify traffic is blocked</li><li>Create additional policies to allow specific traffic</li></ul><h2 id=prerequisites>Prerequisites</h2><ul><li>Two agents installed and confirmed communicating (pingable) on the default virtual network as <a href=/getting-started/trial/base-setup/>set up in previous tutorials</a></li><li>Netcat ( <code>nc</code> ) installed on both agents to generate and capture traffic. This utility is commonly installed by default in most Linux OSes, but may need to be installed manually.</li></ul><h2 id=step-1---generate-traffic>Step 1 - Generate Traffic</h2><div class="alert alert-info" role=alert>Note: The below assumes <strong>agent1</strong> was assigned <code>100.64.0.1</code> and <strong>agent2</strong> was assigned <code>100.64.0.2</code>. If your agents were assigned different IP addresses update the below commands accordingly.</div><h3 id=start-tcp-netcat-listener-on-agent1>Start TCP Netcat listener on agent1</h3><p>Netcat (or <code>nc</code>) is a versatile networking tool that can function as a client to send data to other hosts or as a listener to receive data on a specified port. We will first configure it to listen on agent1.</p><ol><li>Gain console access to <strong>agent1</strong>.</li><li>Run the below command to start netcat listening on TCP port 5000.<div class=codeblock-container><pre><code>nc -k -l 5000</code></pre><button onclick=copyToClipboard(this)>Copy</button></div><script>function copyToClipboard(e){var t=e.previousElementSibling.textContent;navigator.clipboard.writeText(t).then(function(){console.log("Text copied to clipboard")}).catch(function(e){console.error("Could not copy text: ",e)})}</script><style>.codeblock-container{position:relative;display:flex;align-items:center}.codeblock-container pre{margin:0;font-family:monospace;background-color:#f4f4f4;padding:10px;border-radius:5px;flex-grow:1}.codeblock-container button{margin-left:10px;padding:5px 10px;border:none;border-radius:5px;cursor:pointer;&:active { background-color:rgb(200,200,200); }}</style></li><li>Leave this terminal open as netcat will continue listening in the background and will display any data sent to port 5000.</li></ol><h3 id=send-traffic-from-agent2>Send Traffic from agent2</h3><ol><li>Gain console access to <strong>agent2</strong>.</li><li>Run the below command to send a message from <strong>agent2</strong> to <strong>agent1</strong>.<div class=codeblock-container><pre><code> echo "Hello from $(hostname)!" | nc -q 1 100.64.0.1 5000 </code></pre><button onclick=copyToClipboard(this)>Copy</button></div><script>function copyToClipboard(e){var t=e.previousElementSibling.textContent;navigator.clipboard.writeText(t).then(function(){console.log("Text copied to clipboard")}).catch(function(e){console.error("Could not copy text: ",e)})}</script><style>.codeblock-container{position:relative;display:flex;align-items:center}.codeblock-container pre{margin:0;font-family:monospace;background-color:#f4f4f4;padding:10px;border-radius:5px;flex-grow:1}.codeblock-container button{margin-left:10px;padding:5px 10px;border:none;border-radius:5px;cursor:pointer;&:active { background-color:rgb(200,200,200); }}</style></li><li>After about a second you will be returned to the command prompt for <strong>agent2</strong> with no output.</li><li>Return to the console for <strong>agent1</strong> and you should see a message like <code>Hello from agent2!</code>
<script src=/js/fullscreen.js></script><figure class=centered-image><img src=tcp-hello.png alt onclick=toggleImageSize(this) style=display:block;margin-left:auto;margin-right:auto;width:50%><figcaption style=text-align:center;margin-top:.5rem;font-weight:lighter>Netcat listener output on agent1</figcaption></figure></li></ol><h3 id=stop-tcp-netcat-listener-on-agent1>Stop TCP Netcat listener on agent1</h3><ol><li>Return to the console for <strong>agent1</strong> and press Ctrl-C to terminate the netcat listener that was started in Step 1.</li></ol><h3 id=confirm-ping-icmp-traffic>Confirm Ping (ICMP) Traffic</h3><p>Before implementing access policy restrictions, confirm ping (ICMP) traffic is still allowed between the agents:</p><ol><li>On <strong>agent1</strong> run:<div class=codeblock-container><pre><code>ping -c 3 100.64.0.2</code></pre><button onclick=copyToClipboard(this)>Copy</button></div><script>function copyToClipboard(e){var t=e.previousElementSibling.textContent;navigator.clipboard.writeText(t).then(function(){console.log("Text copied to clipboard")}).catch(function(e){console.error("Could not copy text: ",e)})}</script><style>.codeblock-container{position:relative;display:flex;align-items:center}.codeblock-container pre{margin:0;font-family:monospace;background-color:#f4f4f4;padding:10px;border-radius:5px;flex-grow:1}.codeblock-container button{margin-left:10px;padding:5px 10px;border:none;border-radius:5px;cursor:pointer;&:active { background-color:rgb(200,200,200); }}</style></li><li>On <strong>agent2</strong> run:<div class=codeblock-container><pre><code>ping -c 3 100.64.0.1</code></pre><button onclick=copyToClipboard(this)>Copy</button></div><script>function copyToClipboard(e){var t=e.previousElementSibling.textContent;navigator.clipboard.writeText(t).then(function(){console.log("Text copied to clipboard")}).catch(function(e){console.error("Could not copy text: ",e)})}</script><style>.codeblock-container{position:relative;display:flex;align-items:center}.codeblock-container pre{margin:0;font-family:monospace;background-color:#f4f4f4;padding:10px;border-radius:5px;flex-grow:1}.codeblock-container button{margin-left:10px;padding:5px 10px;border:none;border-radius:5px;cursor:pointer;&:active { background-color:rgb(200,200,200); }}</style>You should see ping responses from the other agent, confirming ICMP traffic is still permitted by the default &ldquo;Allow All&rdquo; policy.</li></ol><h2 id=step-2---deny-all-traffic>Step 2 - Deny All Traffic</h2><h3 id=update-existing-access-policy>Update Existing Access Policy</h3><p>Now we will update the default policy to deny all traffic and confirm TCP communication is blocked:</p><ol><li>In the Trustgrid portal, return to the home page and select the Virtual Networks option from the left navigation menu.
<script src=/js/fullscreen.js></script><figure class=centered-image><img src=home-vnet.png alt onclick=toggleImageSize(this) style=display:block;margin-left:auto;margin-right:auto;width:40%></figure></li><li>From the Virtual Networks table, select the <strong>default</strong> virtual network.
<script src=/js/fullscreen.js></script><figure class=centered-image><img src=default-vnet.png alt onclick=toggleImageSize(this) style=display:block;margin-left:auto;margin-right:auto;width:50%></figure></li><li>Click the Access Policies option from the navigation menu on the left.
<script src=/js/fullscreen.js></script><figure class=centered-image><img src=vnet-acl-menu.png alt onclick=toggleImageSize(this) style=display:block;margin-left:auto;margin-right:auto;width:50%></figure></li><li>The existing &ldquo;Allow All&rdquo; policy will be displayed. Click the edit button on the far right.
<script src=/js/fullscreen.js></script><figure class=centered-image><img src=default-acl-allow-all.png alt onclick=toggleImageSize(this) style=display:block;margin-left:auto;margin-right:auto;width:90%></figure></li><li>Change the policy action to &ldquo;Reject&rdquo;, update the description to say &lsquo;deny all traffic&rsquo; and click Save.
<script src=/js/fullscreen.js></script><figure class=centered-image><img src=default-acl-reject-all.png alt onclick=toggleImageSize(this) style=display:block;margin-left:auto;margin-right:auto;width:70%></figure><ol><li>In addition to the &ldquo;Allow&rdquo; and &ldquo;Reject&rdquo; actions is the option to &ldquo;Drop&rdquo;. This will also deny traffic but without sending a response back to the source. Reject is preferred <strong>for the trial</strong> because it provides feedback that traffic was blocked. This may not be the desired setting in a production environment.</li></ol></li><li>All changes at the virtual network level must be reviewed and applied before being broadcast to nodes. Click the Review Changes from the left navigation menu. You will see the previous and new settings. Click the &ldquo;Apply Changes&rdquo; button and then confirm when prompted.
<script src=/js/fullscreen.js></script><figure class=centered-image><img src=acl-deny-apply.png alt onclick=toggleImageSize(this) style=display:block;margin-left:auto;margin-right:auto;width:90%></figure></li></ol><h3 id=confirm-icmp-traffic-is-blocked>Confirm ICMP Traffic is Blocked</h3><ol><li>On <strong>agent1</strong> run:<div class=codeblock-container><pre><code>ping -c 3 100.64.0.2</code></pre><button onclick=copyToClipboard(this)>Copy</button></div><script>function copyToClipboard(e){var t=e.previousElementSibling.textContent;navigator.clipboard.writeText(t).then(function(){console.log("Text copied to clipboard")}).catch(function(e){console.error("Could not copy text: ",e)})}</script><style>.codeblock-container{position:relative;display:flex;align-items:center}.codeblock-container pre{margin:0;font-family:monospace;background-color:#f4f4f4;padding:10px;border-radius:5px;flex-grow:1}.codeblock-container button{margin-left:10px;padding:5px 10px;border:none;border-radius:5px;cursor:pointer;&:active { background-color:rgb(200,200,200); }}</style></li><li>On <strong>agent2</strong> run:<div class=codeblock-container><pre><code>ping -c 3 100.64.0.1</code></pre><button onclick=copyToClipboard(this)>Copy</button></div><script>function copyToClipboard(e){var t=e.previousElementSibling.textContent;navigator.clipboard.writeText(t).then(function(){console.log("Text copied to clipboard")}).catch(function(e){console.error("Could not copy text: ",e)})}</script><style>.codeblock-container{position:relative;display:flex;align-items:center}.codeblock-container pre{margin:0;font-family:monospace;background-color:#f4f4f4;padding:10px;border-radius:5px;flex-grow:1}.codeblock-container button{margin-left:10px;padding:5px 10px;border:none;border-radius:5px;cursor:pointer;&:active { background-color:rgb(200,200,200); }}</style>You should see ping responses from the other agents are now filtered.
<script src=/js/fullscreen.js></script><figure class=centered-image><img src=icmp-filtered.png alt onclick=toggleImageSize(this) style=display:block;margin-left:auto;margin-right:auto;width:75%><figcaption style=text-align:center;margin-top:.5rem;font-weight:lighter>Terminal showing ICMP filtered responses</figcaption></figure></li></ol><h3 id=confirm-tcp-traffic-is-blocked>Confirm TCP Traffic is Blocked</h3><ol><li>On <strong>agent1</strong>, run the following command to start netcat listening on TCP port 5000.<div class=codeblock-container><pre><code>nc -k -l 5000</code></pre><button onclick=copyToClipboard(this)>Copy</button></div><script>function copyToClipboard(e){var t=e.previousElementSibling.textContent;navigator.clipboard.writeText(t).then(function(){console.log("Text copied to clipboard")}).catch(function(e){console.error("Could not copy text: ",e)})}</script><style>.codeblock-container{position:relative;display:flex;align-items:center}.codeblock-container pre{margin:0;font-family:monospace;background-color:#f4f4f4;padding:10px;border-radius:5px;flex-grow:1}.codeblock-container button{margin-left:10px;padding:5px 10px;border:none;border-radius:5px;cursor:pointer;&:active { background-color:rgb(200,200,200); }}</style></li><li>On <strong>agent2</strong>, run the following command to test connectivity to port 5000 on agent1:<div class=codeblock-container><pre><code>nc -vz 100.64.0.1 5000</code></pre><button onclick=copyToClipboard(this)>Copy</button></div><script>function copyToClipboard(e){var t=e.previousElementSibling.textContent;navigator.clipboard.writeText(t).then(function(){console.log("Text copied to clipboard")}).catch(function(e){console.error("Could not copy text: ",e)})}</script><style>.codeblock-container{position:relative;display:flex;align-items:center}.codeblock-container pre{margin:0;font-family:monospace;background-color:#f4f4f4;padding:10px;border-radius:5px;flex-grow:1}.codeblock-container button{margin-left:10px;padding:5px 10px;border:none;border-radius:5px;cursor:pointer;&:active { background-color:rgb(200,200,200); }}</style>You should see a &ldquo;Connection refused&rdquo; message indicating the TCP connection was blocked by the deny all policy.
<script src=/js/fullscreen.js></script><figure class=centered-image><img src=tcp-refused.png alt onclick=toggleImageSize(this) style=display:block;margin-left:auto;margin-right:auto;width:75%><figcaption style=text-align:center;margin-top:.5rem;font-weight:lighter>Netcat output showing 'Connection refused'</figcaption></figure></li><li>Return to <strong>agent1</strong> and enter Ctrl+C to terminate the netcat listener.</li></ol><h2 id=step-3---allow-desired-traffic>Step 3 - Allow Desired Traffic</h2><p>Now that we&rsquo;ve confirmed the virtual network is blocking traffic we can add rules to allow the specific traffic we want.</p><h3 id=allow-all-icmp>Allow all ICMP</h3><p>First, we will add a rule to allow ICMP between all addresses on the network. This is frequently used as a troubleshooting tool with very little risk.</p><ol><li>In the Trustgrid portal, navigate to the default virtual network&rsquo;s access policies page.</li><li>Click the &ldquo;Add Rule&rdquo; button.</li><li>Configure the rule as below:<ol><li>Action: Allow</li><li>Protocol: ICMP</li><li>Source: 0.0.0.0/0</li><li>Destination: 0.0.0.0/0</li><li>Line number: 90 (It is important that the rule number is lower than that on the default deny all policy, 100, so that it is evaluated first)</li><li>Description: Allow all ICMP
<script src=/js/fullscreen.js></script><figure class=centered-image><img src=allow-all-icmp.png alt onclick=toggleImageSize(this) style=display:block;margin-left:auto;margin-right:auto;width:70%></figure></li></ol></li><li>Click Save</li><li>Select the Review Changes panel, click Apply Changes and, then confirm.</li></ol><h3 id=confirm-icmp-allowed>Confirm ICMP Allowed</h3><ol><li>On <strong>agent1</strong> run:<div class=codeblock-container><pre><code>ping -c 3 100.64.0.2</code></pre><button onclick=copyToClipboard(this)>Copy</button></div><script>function copyToClipboard(e){var t=e.previousElementSibling.textContent;navigator.clipboard.writeText(t).then(function(){console.log("Text copied to clipboard")}).catch(function(e){console.error("Could not copy text: ",e)})}</script><style>.codeblock-container{position:relative;display:flex;align-items:center}.codeblock-container pre{margin:0;font-family:monospace;background-color:#f4f4f4;padding:10px;border-radius:5px;flex-grow:1}.codeblock-container button{margin-left:10px;padding:5px 10px;border:none;border-radius:5px;cursor:pointer;&:active { background-color:rgb(200,200,200); }}</style></li><li>On <strong>agent2</strong> run:<div class=codeblock-container><pre><code>ping -c 3 100.64.0.1</code></pre><button onclick=copyToClipboard(this)>Copy</button></div><script>function copyToClipboard(e){var t=e.previousElementSibling.textContent;navigator.clipboard.writeText(t).then(function(){console.log("Text copied to clipboard")}).catch(function(e){console.error("Could not copy text: ",e)})}</script><style>.codeblock-container{position:relative;display:flex;align-items:center}.codeblock-container pre{margin:0;font-family:monospace;background-color:#f4f4f4;padding:10px;border-radius:5px;flex-grow:1}.codeblock-container button{margin-left:10px;padding:5px 10px;border:none;border-radius:5px;cursor:pointer;&:active { background-color:rgb(200,200,200); }}</style>You should see ping responses from the other agent, confirming ICMP traffic is still permitted by the new policy.
<script src=/js/fullscreen.js></script><figure class=centered-image><img src=icmp-allowed.png alt onclick=toggleImageSize(this) style=display:block;margin-left:auto;margin-right:auto;width:90%><figcaption style=text-align:center;margin-top:.5rem;font-weight:lighter>Successful ping from agent2 to agent1</figcaption></figure></li></ol><h3 id=allow-specific-tcp>Allow Specific TCP</h3><p>Next, we will add a rule to allow more specific TCP traffic. Specifically, we will allow <strong>agent2</strong> to connect to port 5000 on <strong>agent1</strong>.</p><ol><li>In the Trustgrid portal, navigate to the default virtual network&rsquo;s access policies page.</li><li>Click the &ldquo;Add Rule&rdquo; button.</li><li>Configure the rule as below:<ol><li>Action: Allow</li><li>Protocol: TCP</li><li>Source: 100.64.0.2/32</li><li>Destination: 100.64.0.1/32</li><li>Port Range: 5000</li><li>Line number: 80 (It is important that the rule number is lower than that on the default deny all policy, 100, so that it is evaluated first)</li><li>Description: Allow TCP 5000 on Agent1
<script src=/js/fullscreen.js></script><figure class=centered-image><img src=tcp-5000-allow.png alt onclick=toggleImageSize(this) style=display:block;margin-left:auto;margin-right:auto;width:70%></figure></li></ol></li><li>Click Save</li><li>Select the Review Changes panel, click Apply Changes and, then confirm.</li></ol><h3 id=confirm-tcp-5000-allowed>Confirm TCP 5000 Allowed</h3><p>Now, we will confirm the specific TCP rule is allowing traffic as expected:</p><ol><li>On <strong>agent1</strong>, run the following command to start netcat listening on TCP port 5000.<div class=codeblock-container><pre><code>nc -k -l 5000</code></pre><button onclick=copyToClipboard(this)>Copy</button></div><script>function copyToClipboard(e){var t=e.previousElementSibling.textContent;navigator.clipboard.writeText(t).then(function(){console.log("Text copied to clipboard")}).catch(function(e){console.error("Could not copy text: ",e)})}</script><style>.codeblock-container{position:relative;display:flex;align-items:center}.codeblock-container pre{margin:0;font-family:monospace;background-color:#f4f4f4;padding:10px;border-radius:5px;flex-grow:1}.codeblock-container button{margin-left:10px;padding:5px 10px;border:none;border-radius:5px;cursor:pointer;&:active { background-color:rgb(200,200,200); }}</style></li><li>On <strong>agent2</strong>, run the following command to test connectivity to port 5000 on agent1:<div class=codeblock-container><pre><code>nc -vz 100.64.0.1 5000</code></pre><button onclick=copyToClipboard(this)>Copy</button></div><script>function copyToClipboard(e){var t=e.previousElementSibling.textContent;navigator.clipboard.writeText(t).then(function(){console.log("Text copied to clipboard")}).catch(function(e){console.error("Could not copy text: ",e)})}</script><style>.codeblock-container{position:relative;display:flex;align-items:center}.codeblock-container pre{margin:0;font-family:monospace;background-color:#f4f4f4;padding:10px;border-radius:5px;flex-grow:1}.codeblock-container button{margin-left:10px;padding:5px 10px;border:none;border-radius:5px;cursor:pointer;&:active { background-color:rgb(200,200,200); }}</style><script src=/js/fullscreen.js></script><figure class=centered-image><img src=tcp-5000-success.png alt onclick=toggleImageSize(this) style=display:block;margin-left:auto;margin-right:auto;width:75%><figcaption style=text-align:center;margin-top:.5rem;font-weight:lighter>Successful connection to port 5000 on agent1</figcaption></figure></li></ol><p>But, we also want to make sure other TCP traffic isn&rsquo;t allowed.</p><ol><li>On <strong>agent1</strong> enter Ctrl+C to terminate the netcat listener. Then enter the command:<div class=codeblock-container><pre><code>nc -k -l 5001</code></pre><button onclick=copyToClipboard(this)>Copy</button></div><script>function copyToClipboard(e){var t=e.previousElementSibling.textContent;navigator.clipboard.writeText(t).then(function(){console.log("Text copied to clipboard")}).catch(function(e){console.error("Could not copy text: ",e)})}</script><style>.codeblock-container{position:relative;display:flex;align-items:center}.codeblock-container pre{margin:0;font-family:monospace;background-color:#f4f4f4;padding:10px;border-radius:5px;flex-grow:1}.codeblock-container button{margin-left:10px;padding:5px 10px;border:none;border-radius:5px;cursor:pointer;&:active { background-color:rgb(200,200,200); }}</style><div class="alert alert-info" role=alert>Note that the port has changed to 5001</div></li><li>On <strong>agent2</strong>, run the following command to test connectivity to port 5000 on agent1:<div class=codeblock-container><pre><code>nc -vz 100.64.0.1 5001</code></pre><button onclick=copyToClipboard(this)>Copy</button></div><script>function copyToClipboard(e){var t=e.previousElementSibling.textContent;navigator.clipboard.writeText(t).then(function(){console.log("Text copied to clipboard")}).catch(function(e){console.error("Could not copy text: ",e)})}</script><style>.codeblock-container{position:relative;display:flex;align-items:center}.codeblock-container pre{margin:0;font-family:monospace;background-color:#f4f4f4;padding:10px;border-radius:5px;flex-grow:1}.codeblock-container button{margin-left:10px;padding:5px 10px;border:none;border-radius:5px;cursor:pointer;&:active { background-color:rgb(200,200,200); }}</style><script src=/js/fullscreen.js></script><figure class=centered-image><img src=tcp-5001-refused.png alt onclick=toggleImageSize(this) style=display:block;margin-left:auto;margin-right:auto;width:75%><figcaption style=text-align:center;margin-top:.5rem;font-weight:lighter>Connection refused on port 5001</figcaption></figure></li></ol><h2 id=next-steps>Next Steps</h2><p>So far we&rsquo;ve only seen traffic passing between two agent IPs. In the next tutorial, you will see how you can <a href=/getting-started/trial/subnet-routing/>route traffic to adjacent network devices</a>.</p><style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style><div class=d-print-none><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes">Glad to hear it! Please <a href=https://github.com/trustgrid/docs/issues/new>tell us how we can improve</a>.</p><p class="feedback--response feedback--response-no">Sorry to hear that. Please <a href=https://github.com/trustgrid/docs/issues/new>tell us how we can improve</a>.</p></div><script>const yesButton=document.querySelector(".feedback--answer-yes"),noButton=document.querySelector(".feedback--answer-no"),yesResponse=document.querySelector(".feedback--response-yes"),noResponse=document.querySelector(".feedback--response-no"),disableButtons=()=>{yesButton.disabled=!0,noButton.disabled=!0},sendFeedback=e=>{if(typeof gtag!="function")return;gtag("event","page_helpful",{event_category:"Helpful",event_label:window.location.pathname,value:e})};yesButton.addEventListener("click",()=>{yesResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(100)}),noButton.addEventListener("click",()=>{noResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(0)})</script><br></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=LinkedIn aria-label=LinkedIn><a target=_blank rel=noopener href=https://www.linkedin.com/company/trustgrid/ aria-label=LinkedIn><i class="fab fa-linkedin"></i></a></li></ul></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=GitHub aria-label=GitHub><a target=_blank rel=noopener href=https://github.com/trustgrid/docs aria-label=GitHub><i class="fab fa-github"></i></a></li></ul></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"><span class=td-footer__copyright>&copy;
2025
<span class=td-footer__authors>Trustgrid</span></span><span class=td-footer__all_rights_reserved>All Rights Reserved</span><span class=ms-2><a href=https://trustgrid.io target=_blank rel=noopener>Privacy Policy</a></span></div></div></div></footer></div><script src=/js/main.min.69e2c1ae9320465ab10236d9ef752c6a4442c54b48b883b17c497b7c7d96a796.js integrity="sha256-aeLBrpMgRlqxAjbZ73UsakRCxUtIuIOxfEl7fH2Wp5Y=" crossorigin=anonymous></script><script src=/js/prism.js></script><script src=/js/tabpane-persist.js></script></body></html>