---
title: "Remote Console Registration"
linkTitle: "Remote Registration"
description: "Shows how the Trustgrid console can be used to register and deregister a Trustgrid Node"
---

{{<alert color="warning">}}This feature is currently available as a preview and requires Trustgrid support to grant portal users access to activate nodes.{{</alert>}}

## Overview
The remote console registration process allows for a Trustgrid Node running a generic image to be registered with a valid Trustgrid account. 

### Requirements
- [Console access]({{<ref "/tutorials/local-console-utility#accessing-the-trustgrid-console-utility">}}) to the Trustgrid Node. This could be achieved via: 
  - For physical devices either keyboard and monitor connections or serial console 
  - For VMware or Hyper-V remote console access
  - For Azure and AWS serial console access via each providers management portal
- Portal access with the appropriate permissions to activate nodes.

{{<alert color="info">}}
Note: It is not necessary for a single person to have both console and portal access. This would allows a Trustgrid customer to ship their clients a generically imaged device or access to a virtual machine image. 

Once the node is deployed with the [required network access]({{<ref "/help-center/kb/site-requirements#network-requirements-for-all-nodes">}}) the Trustgrid customer can work together with their client to complete the activation process.   
{{</alert>}}

### High-Level Process
1. The user with console access to a Trustgrid node logs in: 
    1. If necessary they can [configure a static IP address]({{<ref "/tutorials/local-console-utility#changing-a-trustgrid-node-wan-ip-via-trustgrid-console">}}) from the console.
    1. They then initiate the registration process. This triggers a process that generates unique certificates for the node, upgrades to the latest version, and generates a short activation code. The node will then begin checking with the Trustgrid control plane to see if it has been activated.
1. This code can then be shared with a user with access to the Trustgrid portal. That user can then enter the code in the Trustgrid portal via the **Activate Node** action.  After entering the code they are prompted to provide a name for the node and click **License Node**.
1. When the node detects its code has been activated it finalizes registration and then reboots.  The node is then available for use and configuration. 


## Registering a Node

### Generating Activation Code from Console

1. [Gain console access]({{<ref "/tutorials/local-console-utility#connecting-to-trustgrid-local-console">}})
1. [Login as tgadmin]({{<ref "/tutorials/local-console-utility#logging-in">}})
1. (Optional) Use the [Network Configuration Option](#network-configuration-utility) to change the IP. Default is to use DHCP.
1. Select the **Register Node** action from the main menu. {{<tgimg src="remote-reg-menu.png" caption="Remote Registration Menu option" width="70%">}}
1. You will be prompted to confirm the make and model of the node and the correct control plane endpoints to register with. These should default to the correct settings for your model, if not work with Trustgrid Support. {{<tgimg src="remote-reg-options.png" caption="Confirm Options" width="70%">}}
1. The node will then generate a unique activation code. This code can be shared with a user with access to the Trustgrid portal. {{<tgimg src="remote-reg-code.png" caption="Example registration code" width="70%">}}

### Portal Activation Process
> Currently only users that have been granted access to this feature will see the action to activate a node.
1. The user with access to the Trustgrid portal logs in and navigates to the **Nodes** page.
1. Select the **Activate Node** action and enter the activation code generated by the Trustgrid console. {{<tgimg src="remote-reg-activate-action.png" caption="Nodes table Activate button" width="40%">}}
1. Enter the activation code from the Trustgrid console and click **Find**. {{<tgimg src="remote-reg-activate-code.png" caption="Entering the Activate Code" width="70%">}}
1. Enter a name for the node and click **License Node**. {{<tgimg src="remote-reg-activate-name.png" caption="Node information and prompt for name" width="70%">}}
1. The portal will display a message indicating the node has been activated. {{<tgimg src="remote-reg-activate-notice.png" caption="Activation notice" width="50%">}}
1. The node will complete the registration process and reboot. The node will then be available for use and configuration. {{<tgimg src="remote-reg-final-portal.png" caption="Registered node listed in Nodes table" width="60%">}} {{<tgimg src="remote-reg-final-console.png" caption="Console view after the registered nodes has rebooted." width="80%">}}


## Deregistering a Node
In rare circumstances a node may need to be deregistered which will remove the link between it and the account it was registered with. This will not remove the node from the Trustgrid control plane but communication with both the Trustgrid control plane and any data plane gateways will be severed. This is a one-way process and the node will need to be re-registered with the Trustgrid control plane to re-establish communication.

{{<alert color="warning">}}This process does not completely reset the device to its initial image state, but should be suitable for redeploying at the same site.{{</alert>}}

### Deregistration Process

1. [Gain console access]({{<ref "/tutorials/local-console-utility#connecting-to-trustgrid-local-console">}})
1. [Login as tgadmin]({{<ref "/tutorials/local-console-utility#logging-in">}})
1. Select the **Deregister Node** action from the main menu. {{<tgimg src="dereg-console-option.png" caption="Deregister Menu" width="70%">}}
1. When prompted confirm you wish to deregister the node. {{<tgimg src="dereg-confirm-1.png" caption="Deregister Confirmation" width="70%">}}
1. You will then be prompted to enter `DEREGISTER` to confirm. {{<tgimg src="dereg-confirm-2.png" caption=" Second deregister Confirmation" width="70%">}}
1. The node will then:
    1. If the node is currently connected to the Trustgrid control plane it will send a "Deregister" event type and disconnect from the control plane and any data plane gateways. {{<tgimg src="dereg-portal-event.png" caption="Deregister event" width="100%">}}
    1. Remove it's local certificates and reset it self to be ready to re-register.


## Pre-registration Utilities
Before the node is registered there are a number of utilities available to assist with configuration and troubleshooting.

### Network Configuration Utility
This utility is useful for switching the node to use a static IP or back to DHCP. T

1. Select **Network Configuration** option
1. If prompted, Select the WAN interface. This is typically the first option listed. {{<tgimg src="net-config-interface.png" width="70%">}}
1. Select the IP allocation method. {{<tgimg src="net-config-allocation.png" caption="Option to select DHCP or Static IP" width="70%">}}
    1. DHCP - this will automatically reconfigure the interface for DHCP.
    1. Static IP - this will open the dialog below. Enter the desired config and click OK to apply. {{<tgimg src="net-config-static.png" caption="Static IP configuration prompt" width="70%">}}
1. You will then be prompted to confirm if you want to permanently save the configuration. {{<tgimg src="net-config-save.png" width="70%">}}

### Network Tools Shell
This is the same as the [Troubleshooting - Network Tools Shell](../troubleshooting#network-tools-shell)

### Test Network Access
This will attempt to confirm required access is in place to successfully connect to the Trustgrid Control Plane.
{{<tgimg src="test-network-access.png" caption="Confirms successfully control plane connectivity" width="60%">}}

### Log Shell
This will open a shell in the Trustgrid log directory. This will be empty unless a failed registration has occurred. Work with Trustgrid support to troubleshoot why registration failed.

### Upgrade Node
This is the same as the [Troubleshooting - Force Upgrade](../troubleshooting#force-upgrade)

### Advanced Registration Settings
This can override the default settings included in the image. This should only be used in consultation with Trustgrid Support.