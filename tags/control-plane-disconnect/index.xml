<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>– control plane disconnect</title><link>https://docs.trustgrid.io/tags/control-plane-disconnect/</link><description>Recent content in control plane disconnect on</description><generator>Hugo -- gohugo.io</generator><atom:link href="https://docs.trustgrid.io/tags/control-plane-disconnect/index.xml" rel="self" type="application/rss+xml"/><item><title>Tutorials: Control Plane Disconnect</title><link>https://docs.trustgrid.io/tutorials/operations-runbook/control-plane-disconnect/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.trustgrid.io/tutorials/operations-runbook/control-plane-disconnect/</guid><description>
&lt;blockquote>
&lt;p>When the Control Plane is disconnected there is no way to utilize remote tools to resolve the issue so you will need to contact the End-user technical resource for the site to troubleshoot&lt;/p>
&lt;/blockquote>
&lt;p>When troubleshooting the control plane it is a good idea to familiarize yourself with the [Edge Node Startup &amp;amp; Update Communication Process].&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th> Network Requirements &lt;/th>
&lt;/tr>
&lt;tr>
&lt;td>
In order to connect to the Trustgrid Control Plane, the following &lt;strong>outbound traffic&lt;/strong> must be allowed from the node’s configured primary interface IP address &lt;br/>
&lt;ul>
&lt;li>TCP Port 443 and TCP/UDP 8443 to:&lt;/li>
&lt;ul>
&lt;li>35.171.100.16/28&lt;/li>
&lt;li>34.223.12.192/28&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>TCP/UDP Port 53 to the configured DNS servers. These DNS servers must be able to resolve DNS requests for the trustgrid.io domain&lt;/li>
&lt;/ul>
&lt;/table>
&lt;ol>
&lt;li>
&lt;p>Triage the total site connectivity to see if actions can be taken to restore functionality for the edge site while troubleshooting the specific node&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Confirm with the site tech:&lt;/p>
&lt;p>a. There are no known power or internet issues at the site&lt;/p>
&lt;p>b. No changes have been made to any firewalls between the Trustgrid node and the internet (if applicable). In order to connect the Trustgrid node must have access to the Network Requirements defined above.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Have the site tech attempt to ping the inside interface IP address(es) to see if the device is showing as powered up and online. If the site is using a single-interface configuration this would be the Network Adapter 1 - WAN Interface IP(s) in the portal.&lt;/p>
&lt;p>a. If the ping is successful you have determined the device has power and that the operating system and Trustgrid software are running. In this case, you can focus on internet side issues.&lt;/p>
&lt;p>b. If the ping fails, work with the site tech to:&lt;/p>
&lt;pre>&lt;code> i. Confirm the node is powered on
ii. Connect directly to the network of the inside interface and attempt ping from there. They should also connect directly to the inside interface and statically configure an IP in the same network.
&lt;/code>&lt;/pre>
&lt;/li>
&lt;li>
&lt;p>Attempt power cycling the node by removing power and reconnecting for physical devices, or using the hypervisor management tools for virtual nodes.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Connect to the console of the device&lt;/p>
&lt;p>a. A normal node looks something like this&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="normal-node.png" alt="img">&lt;/p>
&lt;pre>&lt;code>i. Work with the onsite tech to log in to the Trustgrid Local Console Utility. This tool will display the connectivity status and allow you to alter the WAN/outside IP settings if needed.
&lt;/code>&lt;/pre>
&lt;p>b. If you see a screen like below attempt rebooting the device to restore connectivity. If that works contact Trustgrid support so we can investigate further.&lt;/p>
&lt;p>&lt;img src="more-node.png" alt="img">&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Disconnect the cable from the WAN/Outside port of the Trustgrid node and connect to a laptop NIC. Statically assign the same IP and DNS settings that the Trustgrid node is using. Confirm the following:&lt;/p>
&lt;p>a. Using &lt;code>nslookup&lt;/code> or &lt;code>dig&lt;/code> to confirm you can resolve zuul.trustgrid.io&lt;/p>
&lt;p>b. Open a browser and navigate to &lt;a href="https://zuul.trustgrid.io:8443">https://zuul.trustgrid.io:8443&lt;/a>&lt;/p>
&lt;pre>&lt;code> i. If the device can connect to that server and port you should see a warning like this because Trustgrid uses its own Certificate Authority (CA)
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="link.png" alt="img">&lt;/p>
&lt;pre>&lt;code> 1. Click `Not Secure` and then click `Certificate (invalid)`
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="certificate-invalid.png" alt="img">&lt;/p>
&lt;pre>&lt;code> 1. You should expect to see a chain like the below example:
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="chain.png" alt="img">&lt;/p>
&lt;pre>&lt;code> a. If any different certificates or CAs indicate something like DPI-SSL/HTTPS Proxy is interfering with the handshake. See [this page] for resolution requirements.
ii. If the browser says it cannot connect this indicates a firewall or routing issue upstream.
&lt;/code>&lt;/pre>
&lt;ol>
&lt;li>
&lt;p>If possible, capture traffic between the Trustgrid node and the internet. Specifically, the capture should filter to only see traffic from the Trustgrid node’s IP address and TCP port 8443 and TCP/UDP port 53. Common problems seen include:&lt;/p>
&lt;p>a. Blocked DNS - Edge Node Behavior When DNS Fails&lt;/p>
&lt;p>b. Blocked port 8443 to the Trustgrid Networks - Edge Node Behavior When Port 8443 to Trustgrid Public Networks is Blocked&lt;/p>
&lt;p>c. DPI-SSL or HTTPS altering the TLS certificate chain - Edge Node Behavior When SSL / TLS Certificate is Altered&lt;/p>
&lt;/li>
&lt;/ol></description></item></channel></rss>